{
  "openapi": "3.0.0",
  "info": {
    "title": "DigiBot",
    "version": "1.0"
  },
  "servers": [
    {
      "url": "http://localhost:5050",
      "description": "Local Server"
    },
    {
      "url": "https://digibotapp.com/api",
      "description": "Live Server"
    }
  ],
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Create a new user account",
        "description": "New Account Registration Guidelines:\n\n1. Core Required Fields (Applicable to all standard registrations):\n   - firstname\n   - lastname\n   - email\n   - accountType (solo or team)\n   - signUpMethod (email or social)\n   - currency (e.g., USD, INR)\n\n2. Email-based Registration (signUpMethod = email):\n   - Required fields include: firstname, lastname, email, accountType, signUpMethod, currency, mobileCountryCode, mobileNumber, and password.\n\n3. Social-based Registration (signUpMethod = social):\n   - Required fields include: firstname, lastname, email, accountType, signUpMethod, currency, socialProvider (e.g., Google, Microsoft, Apple, Facebook), and avatarUrl.\n   - mobileNumber, mobileCountryCode, and password are not required for social sign-up.\n\n4. Team Account Registration (accountType = team):\n   - In addition to the core required fields, the following company details are mandatory:\n     - companyName\n     - orgType (e.g., Non Profit, Private, Government, Public)\n     - phoneNumber\n     - phoneNumberCountryCode\n\n5. Mailing Address Requirements (team accounts only):\n   - mailingStreetName\n   - mailingCityName\n   - mailingStateName\n   - mailingCountryName\n   - mailingZip\n\n6. Billing Address Requirements (team accounts only):\n   - billingStreetName\n   - billingCityName\n   - billingStateName\n   - billingCountryName\n   - billingZip\n\n7. Invited User Registration (accountType = invited):\n   - Required fields include:\n     - accountType (invited)\n     - email (invited user's email)\n     - token (invitation token)\n     - firstname\n     - lastname\n     - signUpMethod (must be email)\n     - mobileCountryCode\n     - mobileNumber\n     - password\n     - companyId (ID of the company the user is joining)\n     - role (role assigned to the invited user)\n\nEnsure all required fields are provided accurately based on the selected account type and sign-up method to complete registration successfully.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstname": {
                    "type": "string",
                    "example": "John",
                    "description": "First name of the user"
                  },
                  "lastname": {
                    "type": "string",
                    "example": "Doe",
                    "description": "Last name of the user"
                  },
                  "email": {
                    "type": "string",
                    "example": "johndoe@gmail.com",
                    "description": "Email address of the user"
                  },
                  "mobileCountryCode": {
                    "type": "string",
                    "example": "+91",
                    "description": "Mobile country code, required only for signUpMethod = email"
                  },
                  "mobileNumber": {
                    "type": "string",
                    "example": "5555551234",
                    "description": "Mobile number of the user, required only for signUpMethod = email"
                  },
                  "accountType": {
                    "type": "string",
                    "example": "solo",
                    "description": "Type of the account (solo or team)"
                  },
                  "password": {
                    "type": "string",
                    "example": "pass1234",
                    "description": "Password for the user, required only for signUpMethod = email"
                  },
                  "socialProvider": {
                    "type": "string",
                    "example": "google",
                    "description": "Social provider used for signup (google, microsoft, apple, facebook)"
                  },
                  "currency": {
                    "type": "string",
                    "example": "USD",
                    "description": "Currency code for the user"
                  },
                  "companyName": {
                    "type": "string",
                    "example": "Alpha Corp",
                    "description": "Name of the company, required for team accountType"
                  },
                  "orgType": {
                    "type": "string",
                    "example": "Non-Profit",
                    "description": "Organization type (e.g., Non-Profit, Private, Government, etc.), required for team accountType"
                  },
                  "phoneNumber": {
                    "type": "string",
                    "example": "5555551234",
                    "description": "Phone number of the company, required for team accountType"
                  },
                  "phoneNumberCountryCode": {
                    "type": "string",
                    "example": "+91",
                    "description": "Phone number country code, required for team accountType"
                  },
                  "mailingStreetName": {
                    "type": "string",
                    "example": "Main Street",
                    "description": "Street name for mailing address, required for team accountType"
                  },
                  "mailingCountryName": {
                    "type": "string",
                    "example": "US",
                    "description": "Country for mailing address, required for team accountType"
                  },
                  "mailingCityName": {
                    "type": "string",
                    "example": "San Francisco",
                    "description": "City for mailing address, required for team accountType"
                  },
                  "mailingStateName": {
                    "type": "string",
                    "example": "California",
                    "description": "State for mailing address, required for team accountType"
                  },
                  "mailingZip": {
                    "type": "string",
                    "example": "94105",
                    "description": "ZIP code for mailing address, required for team accountType"
                  },
                  "billingStreetName": {
                    "type": "string",
                    "example": "Main Street",
                    "description": "Street name for billing address, required for team accountType"
                  },
                  "billingCountryName": {
                    "type": "string",
                    "example": "US",
                    "description": "Country for billing address, required for team accountType"
                  },
                  "billingCityName": {
                    "type": "string",
                    "example": "San Francisco",
                    "description": "City for billing address, required for team accountType"
                  },
                  "billingStateName": {
                    "type": "string",
                    "example": "California",
                    "description": "State for billing address, required for team accountType"
                  },
                  "billingZip": {
                    "type": "string",
                    "example": "94105",
                    "description": "ZIP code for billing address, required for team accountType"
                  },
                  "avatarUrl": {
                    "type": "string",
                    "example": "https://example.com/avatar.png",
                    "description": "Avatar URL, required for signUpMethod = social"
                  }
                },
                "required": [
                  "firstname",
                  "lastname",
                  "email",
                  "accountType",
                  "signUpMethod",
                  "currency"
                ]
              }
            }
          }
        },
        "responses": {
          "409": {
            "description": "Email already registered",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Email is already registered",
                  "details": {
                    "email": "john.doe@example.com"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred."
                }
              }
            }
          },
          "400": {
            "description": "Missing parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Invalid or Missing fields",
                  "details": {
                    "field": "firstname",
                    "issue": "This field is required"
                  }
                }
              }
            }
          },
          "201": {
            "description": "User registration successful",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Account created successfully",
                  "payment": {
                    "required": false,
                    "sessionUrl": null
                  },
                  "user": {
                    "id": 2,
                    "firstname": "John",
                    "lastname": "Doe",
                    "email": "johndoe@gmail.com",
                    "accountType": "solo",
                    "currency": "USD",
                    "mobileNumber": "5555551234",
                    "mobileCountryCode": "+91",
                    "avatarUrl": "https://example.com/avatar.png",
                    "twoFactorEnabled": false,
                    "language": "en",
                    "passwordSet": false,
                    "role": 2,
                    "auth": {
                      "accessToken": "eyJhbGciOiJIUzI1NiIs...",
                      "refreshToken": "dGhpc2lzYSByZWZyZXNoIHRva2Vu...",
                      "expiresIn": 3600,
                      "refreshTokenExpiresAt": "2025-12-14T10:30:00Z"
                    }
                  },
                  "company": null
                }
              }
            }
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Refresh access token",
        "description": "Validates the provided refresh token, detects token reuse, rotates the refresh token, invalidates the old token, and issues a new access token along with authentication metadata.\n\nRate Limits:\n- 10 requests per minute per IP (recommended to also limit per refresh token).\n\nSecurity:\n- No authentication header required.\n- Uses refresh token provided in the request body.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "description": "Raw refresh token presented by the client",
                    "example": "yJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
                  }
                },
                "required": ["refreshToken"]
              },
              "example": {
                "refreshToken": "yJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "auth": {
                    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "tokenType": "Bearer",
                    "expiresIn": 3600,
                    "refreshToken": "newRotatedRefreshToken12345...",
                    "refreshTokenExpiresAt": "2025-12-20T10:30:00Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "refreshToken",
                      "issue": "refreshToken is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token",
            "content": {
              "application/json": {
                "examples": {
                  "invalidToken": {
                    "value": {
                      "success": false,
                      "error": "unauthorized",
                      "message": "Invalid refresh token",
                      "details": []
                    }
                  },
                  "expiredToken": {
                    "value": {
                      "success": false,
                      "error": "unauthorized",
                      "message": "Expired refresh token",
                      "details": []
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Refresh token reuse detected",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Refresh token reuse detected â€” sessions revoked",
                  "details": {
                    "action": "revoke_all_sessions"
                  }
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later",
                  "details": []
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/email/check": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Check if email is already registered",
        "description": "Checks whether an email address is already registered in the system.\n\nRate Limits:\n- 10 requests per minute per IP.\n\nSecurity:\n- Public endpoint.\n- No authentication required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address to check for existing registration",
                    "example": "johndoe@gmail.com"
                  }
                },
                "required": ["email"]
              },
              "example": {
                "email": "johndoe@gmail.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email existence check result",
            "content": {
              "application/json": {
                "examples": {
                  "emailExists": {
                    "value": {
                      "success": true,
                      "exists": true
                    }
                  },
                  "emailDoesNotExist": {
                    "value": {
                      "success": true,
                      "exists": false
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid or missing email",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing email",
                  "details": [
                    {
                      "field": "email",
                      "issue": "Invalid email format"
                    }
                  ]
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/verify-account": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Verify user email",
        "description": "Verifies a user's email address using a verification token.\n\nRate Limits:\n- 10 requests per minute per IP.\n\nSecurity:\n- Public endpoint.\n- No authentication required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "description": "Email address of the user to be verified",
                    "example": "johndoe@gmail.com"
                  },
                  "token": {
                    "type": "string",
                    "description": "Email verification token issued to the user",
                    "example": "aBC12i"
                  }
                },
                "required": ["email", "token"]
              },
              "example": {
                "email": "john.doe@example.com",
                "token": "aBC12i"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account verified successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Account verification successful"
                }
              }
            }
          },
          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "token",
                      "issue": "This field is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid verification token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Invalid verification token"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "410": {
            "description": "Verification token expired",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "expired",
                  "message": "Verification token expired"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/payment/status": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Check user payment status",
        "description": "Checks the payment status for a user based on the provided email address.\n\nPossible payment statuses:\n- paid\n- pending\n- unpaid\n- failed\n\nRate Limits:\n- 5 requests per minute per IP.\n\nSecurity:\n- Requires Bearer authentication.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "required": true,
            "description": "Email address of the user whose payment status is being checked",
            "schema": {
              "type": "string",
              "format": "email"
            },
            "example": "johndoe@gmail.com"
          }
        ],
        "responses": {
          "200": {
            "description": "Payment status retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "status": "paid"
                }
              }
            }
          },
          "404": {
            "description": "Payment record not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Payment record not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports GET",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/me/verification/resend": {
      "post": {
        "tags": ["User Profile"],
        "summary": "Resend account verification email",
        "description": "Resends an account verification email with a new verification token to the authenticated user.\n\nRate Limits:\n- 3 requests per hour per user ID.\n\nSecurity:\n- Requires Bearer JWT authentication.\n- Requires scope: user:verification:send.\n- Accessible by Admin, Standard, and ViewOnly roles.",
        "security": [
          {
            "bearerAuth": ["user:verification:send"]
          }
        ],
        "responses": {
          "200": {
            "description": "Verification email resent successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Verification email resent successfully"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to resend verification email",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "User already verified",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "User is already verified",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Cannot process verification email request",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Authenticate user",
        "description": "Authenticates a user using one of the following methods:\n\n1. Standard Login:\n   - Requires email and password.\n\n2. Social Login:\n   - Requires email only (Google, Microsoft, Apple, etc.).\n\nThe backend automatically determines the authentication flow based on the provided loginType.\n\nIf two-factor authentication (2FA) is enabled, login will pause and require OTP verification before issuing tokens.\n\nRate Limits:\n- 20 login attempts per 15 minutes.\n\nSecurity:\n- Public endpoint.\n- No authentication required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "loginType": {
                    "type": "string",
                    "enum": ["standard", "social"],
                    "description": "Type of login flow to use",
                    "example": "standard"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Registered email address of the user",
                    "example": "johndoe@gmail.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "Password of the user (required only when loginType is standard)",
                    "example": "Secret123!"
                  }
                },
                "required": ["loginType", "email"]
              },
              "examples": {
                "standardLogin": {
                  "value": {
                    "loginType": "standard",
                    "email": "johndoe@gmail.com",
                    "password": "Secret123!"
                  }
                },
                "socialLogin": {
                  "value": {
                    "loginType": "social",
                    "email": "johndoe@gmail.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful or 2FA required",
            "content": {
              "application/json": {
                "examples": {
                  "loginSuccessSolo": {
                    "value": {
                      "success": true,
                      "message": "Login successful",
                      "user": {
                        "id": 2,
                        "firstname": "John",
                        "lastname": "Doe",
                        "email": "johndoe@gmail.com",
                        "accountType": "solo",
                        "currency": "USD",
                        "mobileNumber": "5555551234",
                        "mobileCountryCode": "+91",
                        "avatarUrl": "https://example.com/avatar.png",
                        "twoFactorEnabled": false,
                        "language": "en",
                        "passwordSet": true,
                        "userCloudIntegrationWeb": true,
                        "userCloudIntegrationMob": true,
                        "role": 2,
                        "auth": {
                          "accessToken": "eyJhbGciOiJIUzI1NiIs...",
                          "refreshToken": "dGhpc2lzYSByZWZyZXNoIHRva2Vu...",
                          "expiresIn": 3600,
                          "refreshTokenExpiresAt": "2025-12-14T10:30:00Z"
                        }
                      },
                      "company": null
                    }
                  },
                  "loginSuccessTeam": {
                    "value": {
                      "success": true,
                      "message": "Login successful",
                      "user": {
                        "id": 2,
                        "firstname": "John",
                        "lastname": "Doe",
                        "email": "johndoe@gmail.com",
                        "accountType": "team",
                        "currency": "USD",
                        "mobileNumber": "5555551234",
                        "mobileCountryCode": "+91",
                        "avatarUrl": "https://example.com/avatar.png",
                        "twoFactorEnabled": false,
                        "language": "en",
                        "passwordSet": true,
                        "userCloudIntegrationWeb": true,
                        "userCloudIntegrationMob": true,
                        "role": 1,
                        "auth": {
                          "accessToken": "eyJhbGciOiJIUzI1NiIs...",
                          "refreshToken": "dGhpc2lzYSByZWZyZXNoIHRva2Vu...",
                          "expiresIn": 3600,
                          "refreshTokenExpiresAt": "2025-12-14T10:30:00Z"
                        }
                      },
                      "company": {
                        "id": 1001,
                        "companyName": "Alpha Corp",
                        "orgType": "Non-Profit",
                        "phoneNumber": "9898989898",
                        "phoneNumberCountryCode": "+1",
                        "companyLogo": "https://example.com/logo.png",
                        "companytwoFactorEnabled": false,
                        "language": "en",
                        "mailingAddress": {
                          "country": "US",
                          "street": "Main Street",
                          "city": "San Francisco",
                          "state": "California",
                          "zip": "94105"
                        },
                        "billingAddress": {
                          "country": "US",
                          "street": "Main Street",
                          "city": "San Francisco",
                          "state": "California",
                          "zip": "94105"
                        }
                      }
                    }
                  },
                  "twoFactorRequired": {
                    "value": {
                      "success": true,
                      "message": "Two-factor verification required",
                      "twoFactorAuth": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing required fields",
                  "details": [
                    {
                      "field": "password",
                      "issue": "This field is required"
                    },
                    {
                      "field": "email",
                      "issue": "This field is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Invalid email or password"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User account not found"
                }
              }
            }
          },
          "409": {
            "description": "Account conflict",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Your account is marked for deletion"
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Your account has been locked. Try again later."
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/verify-otp": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Verify OTP",
        "description": "Verifies the one-time password (OTP) sent to the user's registered email or phone number.\n\nThis endpoint is typically used when two-factor authentication (2FA) is enabled during login. Upon successful OTP verification, authentication tokens are issued.\n\nRate Limits:\n- 10 OTP attempts per 10 minutes.\n\nSecurity:\n- Public endpoint.\n- No authentication required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Registered email address of the user",
                    "example": "user@example.com"
                  },
                  "otp": {
                    "type": "string",
                    "description": "One-time password sent to the user",
                    "example": "123456"
                  }
                },
                "required": ["email", "otp"]
              },
              "example": {
                "email": "user@example.com",
                "otp": "123456"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP verified successfully and login completed",
            "content": {
              "application/json": {
                "examples": {
                  "soloAccount": {
                    "value": {
                      "success": true,
                      "message": "Login successful",
                      "user": {
                        "id": 2,
                        "firstname": "John",
                        "lastname": "Doe",
                        "email": "johndoe@gmail.com",
                        "accountType": "solo",
                        "currency": "USD",
                        "mobileNumber": "5555551234",
                        "mobileCountryCode": "+91",
                        "avatarUrl": "https://example.com/avatar.png",
                        "twoFactorEnabled": true,
                        "language": "en",
                        "passwordSet": true,
                        "userCloudIntegrationWeb": true,
                        "userCloudIntegrationMob": true,
                        "role": 2,
                        "auth": {
                          "accessToken": "eyJhbGciOiJIUzI1NiIs...",
                          "refreshToken": "dGhpc2lzYSByZWZyZXNoIHRva2Vu...",
                          "expiresIn": 3600,
                          "refreshTokenExpiresAt": "2025-12-14T10:30:00Z"
                        }
                      },
                      "company": null
                    }
                  },
                  "teamAccount": {
                    "value": {
                      "success": true,
                      "message": "Login successful",
                      "user": {
                        "id": 2,
                        "firstname": "John",
                        "lastname": "Doe",
                        "email": "johndoe@gmail.com",
                        "accountType": "team",
                        "currency": "USD",
                        "mobileNumber": "5555551234",
                        "mobileCountryCode": "+91",
                        "avatarUrl": "https://example.com/avatar.png",
                        "twoFactorEnabled": true,
                        "language": "en",
                        "passwordSet": true,
                        "cloudIntegrationAccess": true,
                        "role": 1,
                        "auth": {
                          "accessToken": "eyJhbGciOiJIUzI1NiIs...",
                          "refreshToken": "dGhpc2lzYSByZWZyZXNoIHRva2Vu...",
                          "expiresIn": 3600,
                          "refreshTokenExpiresAt": "2025-12-14T10:30:00Z"
                        }
                      },
                      "company": {
                        "id": 1001,
                        "companyName": "Alpha Corp",
                        "orgType": "Non-Profit",
                        "phoneNumber": "9898989898",
                        "phoneNumberCountryCode": "+1",
                        "companyLogo": "https://example.com/logo.png",
                        "companyTwoFactorEnabled": false,
                        "language": "en",
                        "mailingAddress": {
                          "country": "US",
                          "street": "Main Street",
                          "city": "San Francisco",
                          "state": "California",
                          "zip": "94105"
                        },
                        "billingAddress": {
                          "country": "US",
                          "street": "Main Street",
                          "city": "San Francisco",
                          "state": "California",
                          "zip": "94105"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing required fields",
                  "details": [
                    {
                      "field": "otp",
                      "issue": "This field is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid OTP",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Invalid OTP"
                }
              }
            }
          },
          "410": {
            "description": "OTP expired",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "expired",
                  "message": "OTP expired"
                }
              }
            }
          },
          "423": {
            "description": "Account locked due to OTP attempts",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account locked due to multiple invalid OTP attempts"
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/password/forgot": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Send password reset link",
        "description": "Sends a password reset link to the user's registered email address.\n\nRate Limits:\n- 5 requests per hour per email/IP.\n\nSecurity:\n- Public endpoint.\n- No authentication required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Registered email address of the user",
                    "example": "johndoe@gmail.com"
                  }
                },
                "required": ["email"]
              },
              "example": {
                "email": "johndoe@gmail.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset link sent successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Reset password link sent successfully to your email"
                }
              }
            }
          },
          "400": {
            "description": "Invalid or missing input",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing input",
                  "details": [
                    {
                      "field": "email",
                      "issue": "Invalid email format"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Account not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "No account found for the provided email"
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/password/reset": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Reset password",
        "description": "Resets the user's password using the reset token sent to the registered email address.\n\nRate Limits:\n- 5 requests per minute.\n\nSecurity:\n- Public endpoint.\n- No authentication required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Registered email address of the user",
                    "example": "johndoe@gmail.com"
                  },
                  "token": {
                    "type": "string",
                    "description": "Password reset token received via email",
                    "example": "12345"
                  },
                  "password": {
                    "type": "string",
                    "description": "New password chosen by the user",
                    "example": "pass1234"
                  }
                },
                "required": ["email", "token", "password"]
              },
              "example": {
                "email": "johndoe@gmail.com",
                "token": "12345",
                "password": "pass1234"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Password updated successfully"
                }
              }
            }
          },
          "400": {
            "description": "Missing required fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing required fields",
                  "details": [
                    {
                      "field": "password",
                      "issue": "This field is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid reset token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "invalid_token",
                  "message": "The reset token is invalid"
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "This endpoint only supports POST",
                  "details": []
                }
              }
            }
          },
          "410": {
            "description": "Reset token expired",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "token_expired",
                  "message": "The password reset token has expired"
                }
              }
            }
          },
          "422": {
            "description": "Password validation failed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Validation failed",
                  "details": [
                    {
                      "field": "password",
                      "issue": "Password too weak"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/integrations/{integrationId}": {
      "patch": {
        "tags": ["Integrations"],
        "summary": "Update integration status (Logout)",
        "description": "Sends a flag to the backend when a user logs out from a specific integration within the app. This updates the connection state and provides the next authentication URI.",
        "security": [
          {
            "bearerAuth": ["integrations:write"]
          }
        ],
        "parameters": [
          {
            "name": "integrationId",
            "in": "path",
            "required": true,
            "description": "Unique integration ID (e.g., integration_1)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "login": {
                    "type": "boolean",
                    "description": "Set to false to trigger a logout/disconnect",
                    "example": false
                  }
                },
                "required": ["login"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Integration updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Integration updated successfully",
                  "loginUri": "/auth/providers/{provider}"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid or missing data",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing integrationId",
                  "details": [
                    {
                      "field": "integrationId",
                      "issue": "Integration does not exist"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Access denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have access to this integration",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Integration ID does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Integration not found",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded (80 requests per minute)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/integrations/{integrationId}/files": {
      "get": {
        "tags": ["Integrations"],
        "summary": "Fetch files from external integration",
        "description": "A unified endpoint to retrieve files from cloud providers. It returns either a structured list (grouped by channels/folders/sites) or a flat list of files. Handles token validation internally.",
        "security": [
          {
            "bearerAuth": ["integrations:files:read"]
          }
        ],
        "parameters": [
          {
            "name": "integrationId",
            "in": "path",
            "required": true,
            "description": "Unique integration record ID (e.g., integration_1)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Files retrieved successfully (Supports multiple modes)",
            "content": {
              "application/json": {
                "examples": {
                  "Mode_Resources": {
                    "summary": "Google Drive / Slack / WordPress",
                    "value": {
                      "success": true,
                      "login": true,
                      "mode": "resources",
                      "message": "Resources and files fetched successfully",
                      "resources": [
                        {
                          "id": "res_1",
                          "name": "General",
                          "type": "channel",
                          "files": [
                            {
                              "id": "file_1",
                              "name": "Invoice Jan.pdf",
                              "mimeType": "application/pdf",
                              "size": 45678,
                              "importUrl": "/integrations/integration_1/files/file_1/import",
                              "createdTime": "2025-01-15T08:22:00Z",
                              "modifiedTime": "2025-01-20T11:10:00Z",
                              "extra": {}
                            }
                          ]
                        },
                        {
                          "id": "res_2",
                          "name": "Random",
                          "type": "channel",
                          "files": [],
                          "resourceError": {
                            "issue": "App does not have permission to access this resource"
                          }
                        }
                      ]
                    }
                  },
                  "Mode_Files": {
                    "summary": "Dropbox / OneDrive (Flat list)",
                    "value": {
                      "success": true,
                      "login": true,
                      "mode": "files",
                      "message": "Files fetched successfully",
                      "files": [
                        {
                          "id": "file_1",
                          "name": "Project_Specs.docx",
                          "mimeType": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                          "size": 102400,
                          "importUrl": "/integrations/integration_2/files/file_1/import",
                          "createdTime": "2025-01-15T08:22:00Z",
                          "modifiedTime": "2025-01-20T11:10:00Z",
                          "extra": {}
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid integrationId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "integrationId",
                      "issue": "integration ID must be a valid"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Permission denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to access files for this integration",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Integration not linked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Integration not found for this user",
                  "details": [
                    {
                      "field": "integrationId",
                      "issue": "Integration does not exist or is not linked to this user"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Login Required / Token Expired",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Integration login required",
                  "details": [
                    {
                      "IntegrationId": "integration_1",
                      "issue": "No valid tokens found. User must log in to this integration."
                    }
                  ],
                  "OAuth": "/integrations/auth/integration_1"
                }
              }
            }
          },
          "422": {
            "description": "Resource Access Denied - Global provider rejection",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "resource_access_denied",
                  "message": "Unable to access integration resources or files",
                  "details": [
                    {
                      "field": "integrationId",
                      "issue": "Provider denied access. User may have revoked app permissions."
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded (60 req/min)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          }
        }
      }
    },
    "/integrations/auth/{integrationId}": {
      "get": {
        "tags": ["Integrations"],
        "summary": "Initiate OAuth authentication",
        "description": "Starts the OAuth flow for a specific provider. This endpoint validates the short-lived session token (st) and redirects the user to the provider's consent page (e.g., Google OAuth, Slack App Install).",
        "security": [],
        "parameters": [
          {
            "name": "integrationId",
            "in": "path",
            "required": true,
            "description": "Integration identifier (e.g., googledrive, onedrive, dropbox, slack, wordpress)",
            "schema": {
              "type": "string",
              "enum": [
                "googledrive",
                "onedrive",
                "dropbox",
                "slack",
                "wordpress"
              ]
            }
          },
          {
            "name": "platform",
            "in": "query",
            "required": true,
            "description": "The platform initiating the request (web or mobile)",
            "schema": {
              "type": "string",
              "enum": ["web", "mobile"]
            }
          },
          {
            "name": "st",
            "in": "query",
            "required": true,
            "description": "Short-lived sessionToken generated via /oauth-session-token to map the flow to a userId",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to Provider OAuth Consent Page",
            "headers": {
              "Location": {
                "description": "The external URL of the provider's authorization server",
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid integration or parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or unsupported Integration",
                  "details": [
                    {
                      "field": "integrationId",
                      "issue": "Integration does not exist"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded (10 requests per user/minute)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          }
        }
      }
    },
    "/integrations/{integrationId}/files/{fileId}/import/{teamId}": {
      "post": {
        "tags": ["Integrations"],
        "summary": "Import file via secure proxy",
        "description": "Imports a selected file from an external provider to the backend. This is a secure backend-to-backend exchange that prevents provider-specific tokens or URLs from reaching the frontend.",
        "security": [
          {
            "bearerAuth": ["integrations:files:import"]
          }
        ],
        "parameters": [
          {
            "name": "integrationId",
            "in": "path",
            "required": true,
            "description": "Integration record ID saved in DB",
            "schema": { "type": "string" }
          },
          {
            "name": "fileId",
            "in": "path",
            "required": true,
            "description": "File identifier returned by the /files API",
            "schema": { "type": "string" }
          },
          {
            "name": "teamId",
            "in": "path",
            "required": true,
            "description": "The ID of the team receiving the import",
            "schema": { "type": "string" }
          },
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": { "type": "string", "default": "v1" }
          }
        ],
        "requestBody": {
          "description": "Optional destination folder configuration",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "folderId": {
                    "type": "integer",
                    "nullable": true,
                    "description": "Destination folder ID. If null or omitted, file is imported to root.",
                    "example": 22
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Import job initiated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "jobId": 22,
                  "status": "pending",
                  "message": "File uploaded successfully. Processing has started."
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing fileId or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "fileId", "issue": "fileId is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Permission denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to import this file",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found - File or integration does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Requested file not found",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "File does not exist for this integration"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Re-authentication required",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Integration login required",
                  "details": [
                    {
                      "field": "integrationId",
                      "issue": "No valid tokens found. User must log in to this integration."
                    }
                  ],
                  "OAuth": "/integrations/auth/{integrationId}"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded (100 imports per minute)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          }
        }
      }
    },
    "/integrations/auth/oauth-session-token": {
      "post": {
        "tags": ["Integrations"],
        "summary": "Generate OAuth session token",
        "description": "Generates a short-lived (e.g., 120 seconds) one-time session token. This token is appended to the OAuth start URL to securely map the subsequent provider callback to the authenticated user's session.",
        "security": [
          {
            "bearerAuth": ["auth:session"]
          }
        ],
        "parameters": [
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v2"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session token generated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "sessionToken": "abc123456789",
                  "expiresIn": 120
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid JWT",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to request a session token",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded (10 requests per user/minute)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/auth/providers/{provider}": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Starts OAuth login flow for supported external providers",
        "description": "Initiates the OAuth flow for external providers (Google, Google Drive, Microsoft, OneDrive, Dropbox, Slack, WordPress, etc.) using a single unified URL.\n\n**Unified Behavior:**\n- Google = Google Login + Google Drive access\n- Microsoft = Microsoft Login + OneDrive access\n- Backend handles scopes automatically\n\n**Scopes handled by backend (examples):**\n- Google: openid, email, profile, https://www.googleapis.com/auth/drive.readonly\n- Microsoft: openid, email, profile, Files.Read, Files.ReadWrite, offline_access\n- Other providers follow backend configuration\n\n**Note:** Frontend does not need to manage OAuth scopes.",

        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "description": "OAuth provider identifier",
            "schema": {
              "type": "string",
              "example": "google"
            }
          },
          {
            "name": "platform",
            "in": "query",
            "required": true,
            "description": "Platform starting OAuth flow. Ensures correct redirect after OAuth completes.\n- `mobile` â†’ mobile deep link redirect (e.g., digibot://auth?...)\n- `web` â†’ web callback URL (e.g., https://app.com/auth/callback?...)\n\nWithout this parameter, backend cannot reliably determine the redirect target.",
            "schema": {
              "type": "string",
              "example": "mobile"
            }
          },
          {
            "name": "flow",
            "in": "query",
            "required": false,
            "description": "Optional OAuth flow type (registration, login, or integrationDefault). If omitted, treated as integrationDefault.",
            "schema": {
              "type": "string",
              "example": "login"
            }
          }
        ],

        "responses": {
          "302": {
            "description": "Redirects to the provider's OAuth consent page",
            "content": {}
          },

          "400": {
            "description": "Invalid or unsupported provider",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or unsupported provider",
                  "details": [
                    {
                      "field": "provider",
                      "issue": "Provider is not supported"
                    }
                  ]
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server failure",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Server timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        },

        "rateLimit": "10 requests per user per minute",
        "public": true,
        "cache": "No",
        "version": "v1"
      }
    },
    "/me/profile": {
      "get": {
        "tags": ["User Profile"],
        "summary": "Fetch authenticated user profile",
        "description": "Fetches the profile data of the authenticated user.\n\nAuthentication & Authorization:\n- Requires Bearer JWT authentication.\n- Requires scope: user:profile:read.\n- Accessible by Standard and ViewOnly roles.\n\nRate Limits & Caching:\n- 10 requests per minute per IP.\n- Cache duration: 30 seconds to 1 minute.",
        "security": [
          {
            "bearerAuth": ["user:profile:read"]
          }
        ],
        "responses": {
          "200": {
            "description": "User profile fetched successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "User data fetched successfully",
                  "user": {
                    "id": 1,
                    "firstname": "john",
                    "lastname": "doe",
                    "email": "johndoe@gmail.com",
                    "accountStatus": false,
                    "passwordSet": true,
                    "mobileNumber": "(123) 456-7890",
                    "mobileCountryCode": "+1",
                    "accountLockStatus": false,
                    "avatarUrl": "url",
                    "twoFactorEnabled": false,
                    "accountBlocked": false,
                    "accountType": "solo",
                    "role": 2,
                    "language": "en",
                    "userCloudIntegrationWeb": true,
                    "userCloudIntegrationMob": true
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - access denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to access this user's profile",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only GET method is supported",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable entity",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Profile data could not be processed",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["User Profile"],
        "summary": "Update user profile fields",
        "description": "Updates one or more profile fields (firstname, lastname, mobile, language, etc.) for an authenticated user. At least one field must be provided.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: user:profile:update.\n\nRate Limit:\n- 20 requests per minute per user.",
        "security": [{ "bearerAuth": ["user:profile:update"] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstname": { "type": "string", "example": "John" },
                  "lastname": { "type": "string", "example": "Doe" },
                  "mobileCountryCode": { "type": "string", "example": "+1" },
                  "mobileNumber": { "type": "string", "example": "9876543210" },
                  "language": {
                    "type": "string",
                    "example": "en",
                    "description": "ISO language code"
                  }
                },
                "minProperties": 1
              },
              "examples": {
                "fullUpdate": {
                  "summary": "Update multiple fields",
                  "value": {
                    "firstname": "John",
                    "lastname": "Doe",
                    "mobileCountryCode": "+1",
                    "mobileNumber": "9876543210",
                    "language": "en"
                  }
                },
                "singleField": {
                  "summary": "Update only firstname",
                  "value": {
                    "firstname": "John"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Profile updated successfully",
                  "updatedFields": ["firstname", "language"],
                  "user": {
                    "id": 12,
                    "firstname": "John",
                    "lastname": "Doe",
                    "mobileCountryCode": "+1",
                    "mobileNumber": "9876543210",
                    "language": "en"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - no fields provided",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "No fields provided for update",
                  "details": []
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - user cannot update profile",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to update user's profile",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only PATCH method is supported",
                  "details": []
                }
              }
            }
          },
          "415": {
            "description": "Unsupported Media Type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be application/json"
                }
              }
            }
          },
          "422": {
            "description": "Validation error - invalid field values",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Invalid field values",
                  "details": [
                    { "field": "mobileNumber", "issue": "Invalid format" }
                  ]
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and cannot be updated",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },

    "/me/usage": {
      "get": {
        "tags": ["User Profile"],
        "summary": "Retrieve authenticated user usage data",
        "description": "Retrieves the user usage data.\n\nFiltering Behavior:\n- All query parameters are optional.\n- Supports granular filtering based on day, month, and year.\n\nRules:\n- If day, month, and year are provided â†’ fetch usage data only for that specific day.\n- If month and year are provided (without day) â†’ fetch usage data for the entire month.\n- If only year is provided â†’ fetch usage data for the entire year.\n- If no date parameters are provided â†’ fetch all available usage data.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: user:usage:read.\n- Accessible by Standard users.\n\nRate Limits & Caching:\n- 30 requests per minute per companyId.\n- Cache duration: 31 seconds to 1 minute.",
        "security": [
          {
            "bearerAuth": ["user:usage:read"]
          }
        ],
        "parameters": [
          {
            "name": "day",
            "in": "query",
            "description": "Day of the month (1â€“31)",
            "required": false,
            "schema": { "type": "integer", "minimum": 1, "maximum": 31 }
          },
          {
            "name": "month",
            "in": "query",
            "description": "Month of the year (1â€“12)",
            "required": false,
            "schema": { "type": "integer", "minimum": 1, "maximum": 12 }
          },
          {
            "name": "year",
            "in": "query",
            "description": "Four-digit year (e.g. 2025)",
            "required": false,
            "schema": { "type": "integer", "minimum": 1970 }
          }
        ],
        "responses": {
          "200": {
            "description": "User usage data retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "queries": {
                    "current": 0,
                    "limit": 1000
                  },
                  "fileStorageSize": {
                    "used": "2.86 MB",
                    "limit": "5 GB"
                  },
                  "recordings": {
                    "count": 0,
                    "limit": 30
                  },
                  "userFileUploadSources": [
                    { "source": "Dropbox", "count": 1, "size": 0.02 },
                    { "source": "Google Drive", "count": 1, "size": 1560.01 },
                    { "source": "One Drive", "count": 4, "size": 1074.83 },
                    { "source": "Slack", "count": 2, "size": 0.02 },
                    { "source": "Upload", "count": 2, "size": 147.88 },
                    { "source": "Wordpress", "count": 2, "size": 80 }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - access denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to access this user usage data",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "user not found",
                  "details": ["Invalid userId provided"]
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only GET method is supported",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "account is locked",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/me/password": {
      "post": {
        "tags": ["User Profile"],
        "summary": "Change current password for authenticated user",
        "description": "Allows an authenticated user to change their current password by providing the existing password and a new password.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: user:password:update.\n\nRate Limits:\n- 5 requests per minute per userId.",
        "security": [
          {
            "bearerAuth": ["user:password:update"]
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "currentPassword": {
                    "type": "string",
                    "description": "Current password of the user",
                    "example": "oldPass123!"
                  },
                  "newPassword": {
                    "type": "string",
                    "description": "New password to update",
                    "example": "NewPass456!"
                  }
                },
                "required": ["currentPassword", "newPassword"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Password updated successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing required fields",
                  "details": [
                    {
                      "field": "currentPassword",
                      "issue": "This field is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - not allowed to change password",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to change this userâ€™s password",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only POST method is supported",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict - incorrect current password",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Incorrect current password",
                  "details": []
                }
              }
            }
          },
          "415": {
            "description": "Unsupported media type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be application/json",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Validation error - new password too weak",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Validation failed",
                  "details": [
                    { "field": "newPassword", "issue": "Password too weak" }
                  ]
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and password cannot be changed",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/me/password/set": {
      "post": {
        "tags": ["User Profile"],
        "summary": "Set a new password for authenticated user",
        "description": "Allows an authenticated user to set a new password, e.g., for newly social-registered users.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: user:password:set.\n\nRate Limits:\n- 5 requests per minute per userId.",
        "security": [
          {
            "bearerAuth": ["user:password:set"]
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": {
                    "type": "string",
                    "description": "New password to set",
                    "example": "pass1234!"
                  }
                },
                "required": ["password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password setup successful",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Password setup successful",
                  "passwordSet": true
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing required fields",
                  "details": [
                    { "field": "password", "issue": "This field is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - not allowed to set password",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to set password",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only POST method is supported",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict - password already set",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Password already set",
                  "details": []
                }
              }
            }
          },
          "415": {
            "description": "Unsupported media type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be application/json",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Validation error - password too weak",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Validation failed",
                  "details": [
                    { "field": "newPassword", "issue": "Password too weak" }
                  ]
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and password cannot be set",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/me/email": {
      "post": {
        "tags": ["User Profile"],
        "summary": "Update user email and send verification link",
        "description": "Allows an authenticated user to update their email address. A verification link will be sent to the new email.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: user:email:update.\n\nRate Limits:\n- 3 requests per hour per user.",
        "security": [
          {
            "bearerAuth": ["user:email:update"]
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "newEmail": {
                    "type": "string",
                    "description": "The new email address",
                    "example": "johndoe@gmail.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "Current password for verification",
                    "example": "pass1234"
                  }
                },
                "required": ["newEmail", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Email updated successfully. A verification link has been sent to your inbox.",
                  "email": "johndoe@gmail.com",
                  "accountStatus": false
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing required fields",
                  "details": [
                    { "field": "newEmail", "issue": "This field is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - not allowed to update email",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to update this user's email",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only POST method is supported",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict - email already in use",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Email already in use",
                  "details": []
                }
              }
            }
          },
          "415": {
            "description": "Unsupported media type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be application/json",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Validation error - invalid email or password",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Invalid password provided",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and email cannot be updated",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/me/2fa": {
      "post": {
        "tags": ["User Profile"],
        "summary": "Enable or disable Two-Factor Authentication (2FA)",
        "description": "Allows an authenticated user to enable or disable 2FA. \n\n- `enabled` boolean controls behavior: true = enable, false = disable.\n- `password` is required only if the user already has a password set. For social accounts, password may be null or omitted.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: user:2fa:update.\n\nRate Limit:\n- 5 requests per hour per user.",
        "security": [{ "bearerAuth": ["user:2fa:update"] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean",
                    "description": "true = enable 2FA, false = disable 2FA",
                    "example": true
                  },
                  "password": {
                    "type": ["string", "null"],
                    "description": "Required if user has a password; can be null for social accounts",
                    "example": "myPassword123"
                  }
                },
                "required": ["enabled"]
              },
              "examples": {
                "enable": {
                  "summary": "Enable 2FA",
                  "value": { "enabled": true, "password": "myPassword123" }
                },
                "disable": {
                  "summary": "Disable 2FA",
                  "value": { "enabled": false, "password": "myPassword123" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "2FA updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "enabled": {
                    "summary": "2FA enabled",
                    "value": {
                      "success": true,
                      "message": "Two-factor authentication enabled",
                      "twoFactorEnabled": true
                    }
                  },
                  "disabled": {
                    "summary": "2FA disabled",
                    "value": {
                      "success": true,
                      "message": "Two-factor authentication disabled",
                      "twoFactorEnabled": false
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing required fields",
                  "details": [
                    {
                      "field": "password",
                      "issue": "This field is required for accounts with password"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - account not verified",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Account not verified. Verify your account to modify 2FA settings.",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only POST method is supported",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict - 2FA already enabled/disabled",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Two-factor authentication is already enabled/disabled",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Validation error - invalid password",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Invalid password provided",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and cannot update two-factor authentication",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/invitations": {
      "post": {
        "tags": ["Invitations"],
        "summary": "Send company invitation",
        "description": "Sends an invitation to a specific email address to join a company with a designated role. Validates against company seat limits and existing invitations/accounts.",
        "security": [
          {
            "bearerAuth": ["invitations:write"]
          }
        ],
        "parameters": [
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email of the invited user",
                    "example": "johndoe@gmail.com"
                  },
                  "role": {
                    "type": "integer",
                    "description": "Numeric ID for the role (e.g., 1 for Admin, 2 for Member)",
                    "example": 1
                  },
                  "companyId": {
                    "type": "integer",
                    "description": "ID of the company the user is being invited to",
                    "example": 2
                  }
                },
                "required": ["email", "role", "companyId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation sent successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Invitation sent successfully",
                  "data": {
                    "invitationId": 45,
                    "email": "johndoe@gmail.com",
                    "companyId": 12,
                    "role": 1,
                    "status": "pending",
                    "sentAt": "2025-11-22T00:15:20Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "email", "issue": "Email is required" },
                    { "field": "role", "issue": "Role must be a valid" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid JWT",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Company/Team does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team not found",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "No team found with the given ID"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Duplicate invitation, existing account, or limit reached",
            "content": {
              "application/json": {
                "examples": {
                  "DuplicateInvitation": {
                    "value": {
                      "success": false,
                      "error": "conflict",
                      "message": "Invitation already sent",
                      "details": [
                        {
                          "field": "email",
                          "issue": "An invitation already exists for this email"
                        }
                      ]
                    }
                  },
                  "AccountExists": {
                    "value": {
                      "success": false,
                      "error": "conflict",
                      "message": "Account already exists for this email",
                      "details": []
                    }
                  },
                  "LimitReached": {
                    "value": {
                      "success": false,
                      "error": "conflict",
                      "message": "You have reached the maximum number of users",
                      "details": []
                    }
                  }
                }
              }
            }
          },
          "415": {
            "description": "Unsupported Media Type - Invalid Role",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Invalid role provided",
                  "details": [
                    { "field": "role", "issue": "Role not supported" }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - Email sending failure",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Failed to send invitation",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded (30 req/min)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Invitations"],
        "summary": "Retrieve all invitations",
        "description": "Retrieves a paginated list of company invitations with optional search filtering by email or name. Access is restricted to users with Admin privileges.",
        "security": [
          {
            "bearerAuth": ["invitations:read"]
          }
        ],
        "parameters": [
          {
            "name": "companyId",
            "in": "query",
            "required": true,
            "description": "Company ID whose invitations are being fetched",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "description": "Search text applied to email or name",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "description": "Pagination start index (default 0)",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Number of results per page (default 50)",
            "schema": {
              "type": "integer",
              "default": 50
            }
          },
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Invitations retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "invitationList": [
                    {
                      "id": 89,
                      "sender": 72,
                      "userId": null,
                      "company": 48,
                      "email": "xxxx@gmail.com",
                      "role": 2,
                      "status": "Pending",
                      "token": 9716,
                      "token_issued": "1764958444794",
                      "created": "2025-12-05T18:14:04.000Z",
                      "updated": "2025-12-05T18:14:04.000Z",
                      "selected": false
                    }
                  ],
                  "totalPageNum": 1,
                  "noOfRecords": 1
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "companyId", "issue": "companyId is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Access denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Invalid companyId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invalid companyId provided",
                  "details": [
                    {
                      "field": "companyId",
                      "issue": "No matching company exists"
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - Fetch failure",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Failed to fetch invitation list",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/invitations/verify": {
      "post": {
        "tags": ["Invitations"],
        "summary": "Verify invitation token",
        "description": "Public endpoint called by the landing page when a user clicks an email invitation link. It validates the email/token pair and checks for expiration, usage, or cancellation. Returns company and role metadata to pre-fill the registration form.",
        "security": [],
        "parameters": [
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address of the invited user",
                    "example": "john@gmail.com"
                  },
                  "token": {
                    "type": "string",
                    "description": "The unique invitation verification token from the email link",
                    "example": "abc123token"
                  }
                },
                "required": ["email", "token"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation is valid",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "invitationData": {
                    "id": 10,
                    "email": "john@gmail.com",
                    "companyId": 12,
                    "role": 2,
                    "status": "valid",
                    "tokenIssued": "2025-11-20T10:00:00Z",
                    "expires": "2025-12-01T12:00:00Z",
                    "invitedBy": "admin@softcop.com"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing email or token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "email", "issue": "Email is required" },
                    { "field": "token", "issue": "token is required" }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Invitation record doesn't exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invitation not found or does not match the provided email"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Invitation already used, declined, or expired",
            "content": {
              "application/json": {
                "examples": {
                  "AlreadyRegistered": {
                    "summary": "Invitation already used",
                    "value": {
                      "success": false,
                      "error": "conflict",
                      "message": "This invitation has already been used to register"
                    }
                  },
                  "Declined": {
                    "summary": "Invitation retracted",
                    "value": {
                      "success": false,
                      "error": "declined",
                      "message": "This invitation was declined by the sender"
                    }
                  },
                  "Expired": {
                    "summary": "Link expired",
                    "value": {
                      "success": false,
                      "error": "expired",
                      "message": "This invitation link has expired"
                    }
                  },
                  "InvalidToken": {
                    "summary": "Wrong token",
                    "value": {
                      "success": false,
                      "error": "invalid_token",
                      "message": "The invitation token is invalid"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded (30 req/min)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{companyId}/invitations/{invitationId}": {
      "delete": {
        "tags": ["Invitations"],
        "summary": "Delete a specific invitation",
        "description": "Removes a pending invitation from the system. Once deleted, the invitation token will be invalidated and the user will no longer be able to join using that link.",
        "security": [
          {
            "bearerAuth": ["invitations:write"]
          }
        ],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "description": "Company ID to which the invitation belongs",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "invitationId",
            "in": "path",
            "required": true,
            "description": "Unique ID of the invitation being deleted",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation deleted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Invitation deleted successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid ID formats",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "companyId", "issue": "Must be a valid number" },
                    {
                      "field": "invitationId",
                      "issue": "Must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to delete invitations"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Invitation or Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invitation not found for this company"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Invitation state prevents deletion",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "The invitation cannot be deleted"
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded (100 req/min)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{companyId}/invitations/{invitationId}/resend": {
      "post": {
        "tags": ["Invitations"],
        "summary": "Resend company invitation",
        "description": "Updates the invitation timestamp, regenerates the token if necessary, and sends the invitation email again to the user. Restricted to Admin/Manager roles.",
        "security": [
          {
            "bearerAuth": ["invitations:write"]
          }
        ],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "description": "The ID of the company associated with the invitation",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "invitationId",
            "in": "path",
            "required": true,
            "description": "Unique ID of the invitation record",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation resent successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Invitation resent successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid path parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "companyId", "issue": "Must be a valid number" },
                    {
                      "field": "invitationId",
                      "issue": "Must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid JWT",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to resend invitations"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Invitation not found in this company context",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invitation not found for this company"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - User registered, invitation state mismatch, or limit reached",
            "content": {
              "application/json": {
                "examples": {
                  "UserRegistered": {
                    "summary": "User already has an account",
                    "value": {
                      "success": false,
                      "error": "conflict",
                      "message": "User has already registered and cannot be invited again"
                    }
                  },
                  "StateMismatch": {
                    "summary": "Invitation already accepted or expired",
                    "value": {
                      "success": false,
                      "error": "conflict",
                      "message": "This invitation cannot be resent because it is expired or already accepted"
                    }
                  },
                  "LimitReached": {
                    "summary": "Company seat limit reached",
                    "value": {
                      "success": false,
                      "error": "conflict",
                      "message": "The company has reached the maximum number of users"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded (50 req/min)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/invitations/decline": {
      "post": {
        "tags": ["Invitations"],
        "summary": "Decline an invitation",
        "description": "Publicly accessible endpoint that allows a user to decline a pending invitation. This invalidates the token and updates the invitation status to 'declined', preventing any further registration attempts.",
        "security": [],
        "parameters": [
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email of the invited user",
                    "example": "johndoe@gmail.com"
                  },
                  "token": {
                    "type": "string",
                    "description": "Unique invitation token provided in the email link",
                    "example": "12345"
                  }
                },
                "required": ["email", "token"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation declined successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Invitation declined successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing required fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "email", "issue": "This field is required" },
                    { "field": "token", "issue": "This field is required" }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Invitation record doesn't exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invitation not found or invalid email/token"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Invitation in a state that cannot be declined",
            "content": {
              "application/json": {
                "examples": {
                  "AlreadyDeclined": {
                    "summary": "Already Declined",
                    "value": {
                      "success": false,
                      "error": "declined",
                      "message": "The invitation has already been declined"
                    }
                  },
                  "AlreadyRegistered": {
                    "summary": "User already registered",
                    "value": {
                      "success": false,
                      "error": "registered",
                      "message": "This invitation has already been used to register an account"
                    }
                  },
                  "Expired": {
                    "summary": "Invitation expired",
                    "value": {
                      "success": false,
                      "error": "expired",
                      "message": "The invitation has expired"
                    }
                  },
                  "InvalidToken": {
                    "summary": "Token invalid",
                    "value": {
                      "success": false,
                      "error": "invalid",
                      "message": "Invalid invitation token provided"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded (20 req/min)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/{userId}": {
      "get": {
        "tags": ["Admin - Users"],
        "summary": "Retrieve user details (Admin)",
        "description": "Returns detailed profile, security status, and integration settings for a specific user. Access is restricted to SuperAdmins and Admins.",
        "security": [
          {
            "bearerAuth": ["admin:users:read"]
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "description": "The unique numeric ID of the user to fetch",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User details retrieved successfully",
            "headers": {
              "Cache-Control": {
                "description": "Standard caching header",
                "schema": { "type": "string", "example": "max-age=30" }
              }
            },
            "content": {
              "application/json": {
                "example": {
                  "id": 74,
                  "firstname": "john",
                  "lastname": "doe",
                  "email": "johndoe@gmail.com",
                  "role": 3,
                  "mobileCountryCode": "+1",
                  "mobileNumber": "0000000000",
                  "avatarUrl": "https://example.com/user-avatars/default.png",
                  "passwordSet": true,
                  "language": "en",
                  "accountVerified": false,
                  "accountLocked": false,
                  "accountBlocked": false,
                  "twoFactorEnabled": false,
                  "userCloudIntegrationWeb": true,
                  "userCloudIntegrationMob": true,
                  "created": "2025-11-18T19:28:41.000Z"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid userId format",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "userId", "issue": "Must be a valid number" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid JWT",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient administrative permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to access user details"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - User does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded (50 requests per minute)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Admin", "Users"],
        "summary": "Permanently delete a user account",
        "description": "Allows SuperAdmin or Admin to permanently delete a user account by userId. This action is irreversible and removes all associated user data.",

        "security": [{ "BearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number" },
            "description": "ID of the user to delete"
          }
        ],

        "responses": {
          "200": {
            "description": "User deleted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "User deleted successfully"
                }
              }
            }
          },

          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "userId", "issue": "Must be a valid number" }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized (missing or invalid JWT)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden (insufficient permissions)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to update account status"
                }
              }
            }
          },

          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },

          "409": {
            "description": "Conflict â€” user could not be deleted",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "User account could not be deleted"
                }
              }
            }
          },

          "422": {
            "description": "Unprocessable entity â€” unable to process deletion request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Unable to process the deletion request"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Server timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        },

        "rateLimit": "60 requests per minute",
        "roles": ["SuperAdmin", "Admin"],
        "cache": "Yes",
        "version": "v1"
      }
    },
    "/admin/users/{userId}/verify": {
      "post": {
        "tags": ["Admin - Users"],
        "summary": "Manually verify user account",
        "description": "Updates the 'accountVerified' status of a user to true. This action can only be performed by users with administrative write permissions.",
        "security": [
          {
            "bearerAuth": ["admin:users:write"]
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "description": "The unique ID of the user to be verified",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "default": "v1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User account verified successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "User account verified successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid userId format",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "userId", "issue": "Must be a valid number" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid JWT",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient administrative permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to verify user accounts"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - User does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - User is already verified",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "User already Verified"
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/{userId}/password": {
      "patch": {
        "tags": ["Admin", "Users"],
        "summary": "Update a user's password",
        "description": "Allows an Admin or SuperAdmin to update a user's password. Only Admins/SuperAdmins can perform this operation.",

        "security": [{ "BearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number" },
            "description": "Unique ID of the user whose password is being updated"
          }
        ],

        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "newPassword": { "type": "string" }
                },
                "required": ["newPassword"]
              },
              "example": {
                "newPassword": "Pass1234!"
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "Password updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Password updated successfully for user"
                }
              }
            }
          },

          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "newPassword",
                      "issue": "This field is required"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized (missing or invalid JWT)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden (insufficient permissions)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to update user passwords"
                }
              }
            }
          },

          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },

          "409": {
            "description": "Conflict â€” password update failed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Password update failed"
                }
              }
            }
          },

          "422": {
            "description": "Validation error â€” password too weak",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Validation failed",
                  "details": [
                    { "field": "newPassword", "issue": "Password too weak" }
                  ]
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Server timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        },

        "rateLimit": "30 requests per minute",
        "roles": ["SuperAdmin", "Admin"],
        "cache": "Yes",
        "version": "v1"
      }
    },
    "/admin/users/{userId}/2fa": {
      "patch": {
        "tags": ["Admin", "Users"],
        "summary": "Enable or disable two-factor authentication (2FA) for a user",
        "description": "Allows an Admin or SuperAdmin to enable or disable two-factor authentication for a specific user account.",

        "security": [{ "BearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number" },
            "description": "Unique ID of the user for whom 2FA settings will be changed"
          }
        ],

        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean",
                    "description": "true = enable 2FA, false = disable 2FA"
                  }
                },
                "required": ["enabled"]
              },
              "examples": {
                "enable": { "value": { "enabled": true } },
                "disable": { "value": { "enabled": false } }
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "2FA updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "enable": {
                    "value": {
                      "success": true,
                      "message": "Two-factor authentication enabled"
                    }
                  },
                  "disable": {
                    "value": {
                      "success": true,
                      "message": "Two-factor authentication disabled"
                    }
                  }
                }
              }
            }
          },

          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "enabled",
                      "issue": "This field is required and must be boolean"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized (missing or invalid JWT)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden (insufficient permissions)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to manage 2FA settings"
                }
              }
            }
          },

          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },

          "409": {
            "description": "Conflict â€” unable to update 2FA",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Unable to update two-factor authentication for this user"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Server timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        },

        "rateLimit": "20 requests per minute",
        "roles": ["SuperAdmin", "Admin"],
        "cache": "Yes",
        "version": "v1"
      }
    },
    "/admin/users/{userId}/account-status": {
      "patch": {
        "tags": ["Admin", "Users"],
        "summary": "Update a user's account status",
        "description": "Allows SuperAdmin or Admin to lock/unlock or block/unblock a user account.",

        "security": [{ "BearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number" },
            "description": "Unique ID of the user whose account status will be updated"
          }
        ],

        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": ["locked", "unlocked", "blocked", "unblocked"],
                    "description": "New account status"
                  }
                },
                "required": ["status"]
              },
              "examples": {
                "lock": { "value": { "status": "locked" } },
                "unlock": { "value": { "status": "unlocked" } },
                "block": { "value": { "status": "blocked" } },
                "unblock": { "value": { "status": "unblocked" } }
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "Account status updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "lock": {
                    "value": {
                      "success": true,
                      "message": "User account status updated successfully",
                      "status": "locked",
                      "accountLocked": true
                    }
                  },
                  "unlock": {
                    "value": {
                      "success": true,
                      "message": "User account status updated successfully",
                      "status": "unlocked",
                      "accountLocked": false
                    }
                  },
                  "block": {
                    "value": {
                      "success": true,
                      "message": "User account status updated successfully",
                      "status": "blocked",
                      "accountBlocked": true
                    }
                  },
                  "unblock": {
                    "value": {
                      "success": true,
                      "message": "User account status updated successfully",
                      "status": "unblocked",
                      "accountBlocked": false
                    }
                  }
                }
              }
            }
          },

          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "status",
                      "issue": "Must be one of: locked, unlocked, blocked, unblocked"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized (missing or invalid JWT)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden (insufficient permissions)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to update account status"
                }
              }
            }
          },

          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },

          "409": {
            "description": "Conflict â€” account status cannot be updated",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Account status cannot be updated"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Server timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        },

        "rateLimit": "30 requests per minute",
        "roles": ["SuperAdmin", "Admin"],
        "cache": "Yes",
        "version": "v1"
      }
    },
    "/teams": {
      "post": {
        "tags": ["Team"],
        "summary": "Create a new team",
        "description": "Creates a new team. Supports company users (team under a company) and solo users (team under personal workspace). If the user belongs to a company, companyId must be provided. If the user is solo, companyId may be null.",
        "security": [{ "bearerAuth": ["team:create"] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "teamName": {
                    "type": "string",
                    "description": "Name of the team, must be non-empty"
                  },
                  "teamAlias": {
                    "type": "string",
                    "description": "Unique alias within user/company scope"
                  },
                  "companyId": {
                    "type": ["integer", "null"],
                    "description": "Company ID for team (if omitted or null, team belongs to personal workspace)"
                  }
                },
                "required": ["teamName", "teamAlias"]
              },
              "examples": {
                "teamUser": {
                  "summary": "Team under a company",
                  "value": {
                    "teamName": "Artificial Intelligence",
                    "teamAlias": "ai-team",
                    "companyId": 47
                  }
                },
                "soloUser": {
                  "summary": "Personal workspace team",
                  "value": {
                    "teamName": "My Personal Team",
                    "teamAlias": "myteam"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Team created successfully",
            "content": {
              "application/json": {
                "examples": {
                  "companyTeam": {
                    "summary": "Team created under a company",
                    "value": {
                      "success": true,
                      "message": "Team created successfully",
                      "team": {
                        "id": 26,
                        "creatorId": 71,
                        "companyId": 47,
                        "teamName": "Artificial Intelligence",
                        "teamAlias": "ai-team",
                        "active": true,
                        "uuid": "78f7b218-f625-56e6-acfa-1cc6d18c54a7",
                        "created": "2025-11-19T05:15:04.000Z",
                        "updated": "2025-11-19T05:15:04.000Z",
                        "noOfFiles": 0
                      }
                    }
                  },
                  "soloTeam": {
                    "summary": "Team created under personal workspace",
                    "value": {
                      "success": true,
                      "message": "Team created successfully",
                      "team": {
                        "id": 26,
                        "creatorId": 71,
                        "companyId": null,
                        "teamName": "My Solo Team",
                        "teamAlias": "myteam",
                        "active": true,
                        "uuid": "e5c12bd4-3874-452b-b120-7f2f62acbaa1",
                        "created": "2025-11-19T05:15:04.000Z",
                        "updated": "2025-11-19T05:15:04.000Z",
                        "noOfFiles": 0
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid fields",
                  "details": [
                    { "field": "x", "issue": "This field is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "examples": {
                  "noPermission": {
                    "summary": "User cannot create team",
                    "value": {
                      "success": false,
                      "error": "forbidden",
                      "message": "You do not have permission to create a team"
                    }
                  },
                  "companyNotVerified": {
                    "summary": "Company not found (companyId â‰  null)",
                    "value": {
                      "success": false,
                      "error": "not_found",
                      "message": "Company not found"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflict - teamAlias already exists",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "A team with this teamAlias already exists"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable entity - invalid field values",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "One or more fields contain invalid values"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Team"],
        "summary": "Retrieve list of teams",
        "description": "Retrieves the full list of teams for either a company workspace or a personal workspace (solo user). Supports search, pagination, and company filtering through query parameters.",
        "security": [
          {
            "bearerAuth": ["team:read"]
          }
        ],
        "parameters": [
          {
            "name": "searchString",
            "in": "query",
            "description": "Text to search by team name",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Pagination offset (default: 0)",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "minimum": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Pagination limit (default: 10)",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "companyId",
            "in": "query",
            "description": "Required for company users; omit for solo users",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Team list fetched successfully",
            "content": {
              "application/json": {
                "examples": {
                  "companyUser": {
                    "summary": "Company user team list",
                    "value": {
                      "success": true,
                      "message": "Team list fetched successfully",
                      "teamList": [
                        {
                          "id": 1,
                          "companyId": 12,
                          "creatorId": "user123",
                          "teamName": "Artificial Intelligence",
                          "teamAlias": "AI-1",
                          "active": true,
                          "uuid": "string",
                          "created": "2024-01-08T10:22:47.000Z",
                          "updated": "2024-01-08T10:22:47.000Z",
                          "selected": false,
                          "noOfFiles": 0
                        }
                      ],
                      "totalPagesNum": 5,
                      "noOfRecords": 50
                    }
                  },
                  "soloUser": {
                    "summary": "Solo user (personal workspace) team list",
                    "value": {
                      "success": true,
                      "message": "Team list fetched successfully",
                      "teamList": [
                        {
                          "id": 3,
                          "companyId": null,
                          "creatorId": "user456",
                          "teamName": "My Personal Team",
                          "teamAlias": "my-team",
                          "active": true,
                          "uuid": "string",
                          "created": "2024-02-12T08:10:30.000Z",
                          "updated": "2024-02-12T08:10:30.000Z",
                          "selected": true,
                          "noOfFiles": 4
                        }
                      ],
                      "totalPagesNum": 1,
                      "noOfRecords": 1
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid fields",
                  "details": [
                    {
                      "field": "companyId",
                      "issue": "Required for company users; must be null for solo users"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Invalid companyId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invalid companyId provided",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict while fetching team list",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to fetch team list",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Invalid query parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Invalid or incorrectly formatted input",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },

    "/teams/{teamId}": {
      "put": {
        "tags": ["Team"],
        "summary": "Update an existing team",
        "description": "Updates an existing team. A team may belong to a company workspace or a personal workspace. Only the team creator or a company admin may update the team.",
        "security": [
          {
            "bearerAuth": ["team:update", "company:team:update"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team to update",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "teamName": {
                    "type": "string",
                    "description": "Name of the team, must be non-empty if provided"
                  },
                  "teamAlias": {
                    "type": "string",
                    "description": "Unique alias within user/company scope"
                  },
                  "companyId": {
                    "type": "integer",
                    "description": "Required for company users; omit for solo users"
                  }
                }
              },
              "examples": {
                "soloUser": {
                  "summary": "Update solo user team",
                  "value": {
                    "teamName": "My Personal Team",
                    "teamAlias": "my-team"
                  }
                },
                "companyUser": {
                  "summary": "Update company team",
                  "value": {
                    "teamName": "Marketing",
                    "teamAlias": "mkt",
                    "companyId": 47
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Team updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "soloTeam": {
                    "summary": "Solo user team updated",
                    "value": {
                      "success": true,
                      "message": "Team updated successfully",
                      "team": {
                        "id": 26,
                        "teamName": "Personal AI Team",
                        "teamAlias": "ai-my",
                        "companyId": null,
                        "creatorId": 71,
                        "updatedBy": 71,
                        "updated": "2025-11-19T10:40:00Z"
                      }
                    }
                  },
                  "companyTeam": {
                    "summary": "Company team updated",
                    "value": {
                      "success": true,
                      "message": "Team updated successfully",
                      "team": {
                        "id": 26,
                        "teamName": "AI Research Team",
                        "teamAlias": "ai-research",
                        "companyId": 47,
                        "creatorId": 71,
                        "updatedBy": 71,
                        "updated": "2025-11-19T10:40:00Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - no fields provided",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "At least one field (teamName or teamAlias) must be provided"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to update this team"
                }
              }
            }
          },
          "404": {
            "description": "Team not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team not found"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - teamAlias already in use",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "teamAlias already in use"
                }
              }
            }
          },
          "415": {
            "description": "Unsupported Media Type - wrong Content-Type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be application/json"
                }
              }
            }
          },
          "422": {
            "description": "Invalid payload",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "invalid_payload",
                  "message": "Invalid input format"
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and cannot be updated",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/shared": {
      "get": {
        "tags": ["Team"],
        "summary": "Retrieve shared teams",
        "description": "Retrieves teams that are shared with the authenticated user, including metadata such as who shared the team and file counts. Applicable to both company and solo users.",
        "security": [
          {
            "bearerAuth": ["teams:read"]
          }
        ],
        "responses": {
          "200": {
            "description": "Shared teams fetched successfully",
            "content": {
              "application/json": {
                "examples": {
                  "sharedTeams": {
                    "summary": "Teams shared with the user",
                    "value": {
                      "success": true,
                      "message": "Shared teams fetched successfully",
                      "sharedTeamList": [
                        {
                          "id": 8,
                          "team_name": "Design Review",
                          "teamAlias": "DES-REV",
                          "active": true,
                          "sharedByUserId": "usr_345",
                          "uuid": "abc-123",
                          "created": "2024-01-08T10:22:47.000Z",
                          "updated": "2024-01-08T10:22:47.000Z"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict while fetching shared teams",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to fetch shared team list",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/status": {
      "patch": {
        "tags": ["Team"],
        "summary": "Update team active status",
        "description": "Updates the active status of a team. Used to activate or deactivate a team by sending `active: true` or `active: false` in the request body. Returns the updated team data.",
        "security": [
          {
            "bearerAuth": ["teams:write"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team whose status needs to be updated",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["active"],
                "properties": {
                  "active": {
                    "type": "boolean",
                    "description": "Set to true to activate the team, false to deactivate the team"
                  }
                }
              },
              "examples": {
                "activateTeam": {
                  "summary": "Activate a team",
                  "value": {
                    "active": true
                  }
                },
                "deactivateTeam": {
                  "summary": "Deactivate a team",
                  "value": {
                    "active": false
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Team status updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "teamActivated": {
                    "summary": "Team activated",
                    "value": {
                      "success": true,
                      "message": "Team activated successfully",
                      "team": {
                        "id": 12345,
                        "companyId": 12,
                        "team_name": "Artificial Intelligence",
                        "teamAlias": "AI-1",
                        "active": true,
                        "uuid": "string",
                        "created": "2024-01-08T10:22:47.000Z",
                        "updated": "2024-01-08T10:22:47.000Z",
                        "noOfFiles": 0
                      }
                    }
                  },
                  "teamDeactivated": {
                    "summary": "Team deactivated",
                    "value": {
                      "success": true,
                      "message": "Team deactivated successfully",
                      "team": {
                        "id": 12345,
                        "companyId": 12,
                        "team_name": "Artificial Intelligence",
                        "teamAlias": "AI-1",
                        "active": false,
                        "uuid": "string",
                        "created": "2024-01-08T10:22:47.000Z",
                        "updated": "2024-01-08T10:22:47.000Z",
                        "noOfFiles": 0
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "active",
                      "issue": "active must be true or false"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Team not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team does not exist",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict while updating team status",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to update team status",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/activate": {
      "post": {
        "tags": ["Team"],
        "summary": "Activate Team",
        "description": "Activate a team and retrieve updated team information.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string",
                      "example": "Team activated successfully"
                    },
                    "teamList": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "example": {
                          "id": 1,
                          "companyId": 1,
                          "creatorId": 1,
                          "teamName": "Artificial Intelligence",
                          "teamAlias": "AI-1",
                          "active": 1,
                          "uuid": "string",
                          "created": "2024-01-08T10:22:47.000Z",
                          "updated": "2024-01-08T10:22:47.000Z",
                          "selected": false,
                          "noOfFiles": 0
                        }
                      }
                    },
                    "totalPageNum": {
                      "type": "integer"
                    },
                    "noOfRecords": {
                      "type": "integer"
                    },
                    "activeTeams": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "example": {
                          "id": 1,
                          "companyId": 1,
                          "creatorId": 1,
                          "teamName": "Artificial Intelligence",
                          "teamAlias": "AI-1",
                          "active": 1,
                          "uuid": "string",
                          "created": "2024-01-08T10:22:47.000Z",
                          "updated": "2024-01-08T10:22:47.000Z",
                          "selected": false,
                          "noOfFiles": 0
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "201 ": {
            "description": "Team activated successfully, but failed the fetch the updated list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Team activated successfully, but failed the fetch the updated list."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No token supplied."
                    }
                  }
                }
              }
            }
          },
          "401 ": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Token Invalid"
                    }
                  }
                }
              }
            }
          },
          "401  ": {
            "description": "Admin Access Denied",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Access Denied"
                    }
                  }
                }
              }
            }
          },
          "401    ": {
            "description": "Organization not exists",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid compnayId provided"
                }
              }
            }
          },
          "401     ": {
            "description": "Team not exists",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid teamId provided"
                }
              }
            }
          },
          "400": {
            "description": "Missing Parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Missing parameters, fill all the required fields"
                }
              }
            }
          }
        }
      }
    },
    "/teams/active": {
      "get": {
        "tags": ["Team"],
        "summary": "Retrieve active teams",
        "description": "Returns the full list of active teams for either a company workspace or a personal workspace (solo user). Only teams marked as active are returned.",
        "security": [
          {
            "bearerAuth": ["teams:read"]
          }
        ],
        "parameters": [
          {
            "name": "companyId",
            "in": "query",
            "description": "Required for company users; omit for solo users",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Active teams fetched successfully",
            "content": {
              "application/json": {
                "examples": {
                  "companyUser": {
                    "summary": "Active teams for company workspace",
                    "value": {
                      "success": true,
                      "message": "Active teams fetched successfully",
                      "teamList": [
                        {
                          "id": 3,
                          "companyId": 12,
                          "team_name": "AI Core",
                          "teamAlias": "AI-CORE",
                          "active": true,
                          "uuid": "string",
                          "created": "2024-01-08T10:22:47.000Z",
                          "updated": "2024-01-08T10:22:47.000Z",
                          "noOfFiles": 10
                        }
                      ]
                    }
                  },
                  "soloUser": {
                    "summary": "Active teams for solo user",
                    "value": {
                      "success": true,
                      "message": "Active teams fetched successfully",
                      "teamList": [
                        {
                          "id": 5,
                          "companyId": null,
                          "team_name": "My Active Team",
                          "teamAlias": "MY-ACTIVE",
                          "active": true,
                          "uuid": "string",
                          "created": "2024-02-14T09:15:00.000Z",
                          "updated": "2024-02-14T09:15:00.000Z",
                          "noOfFiles": 2
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid fields",
                  "details": [
                    {
                      "field": "companyId",
                      "issue": "Required for company users; must be null for solo users"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Invalid companyId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invalid companyId provided",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict while fetching active teams",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to fetch active team list",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Invalid query parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Invalid or incorrectly formatted input",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/folders": {
      "post": {
        "tags": ["Folder"],
        "summary": "Create a folder in a team",
        "description": "Creates a new folder inside a teamâ€™s file structure. The folder may be created at the root level of the team (when parentId is null or omitted) or inside another folder (when parentId is provided).",
        "security": [
          {
            "bearerAuth": ["folders:write"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["folderName"],
                "properties": {
                  "folderName": {
                    "type": "string",
                    "description": "Name of the new folder"
                  },
                  "tooltip": {
                    "type": "string",
                    "description": "Additional description or tooltip text"
                  },
                  "parentId": {
                    "type": "integer",
                    "nullable": true,
                    "description": "ID of the parent folder; null or omitted means root-level folder"
                  }
                }
              },
              "examples": {
                "createRootFolder": {
                  "summary": "Create root-level folder",
                  "value": {
                    "folderName": "Projects",
                    "tooltip": "Main folder"
                  }
                },
                "createSubFolder": {
                  "summary": "Create sub-folder",
                  "value": {
                    "folderName": "Design Docs",
                    "parentId": 4
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Folder created successfully",
            "content": {
              "application/json": {
                "examples": {
                  "rootLevelFolder": {
                    "summary": "Folder created at root level",
                    "value": {
                      "success": true,
                      "message": "Folder created successfully",
                      "folder": {
                        "id": 18,
                        "teamId": 12,
                        "parentId": null,
                        "name": "Design Docs",
                        "tooltip": "Default Folder",
                        "isDefault": false,
                        "isFile": false,
                        "created": "2024-01-08T10:22:47.000Z"
                      }
                    }
                  },
                  "subFolder": {
                    "summary": "Folder created inside another folder",
                    "value": {
                      "success": true,
                      "message": "Folder created successfully",
                      "folder": {
                        "id": 18,
                        "teamId": 12,
                        "parentId": 4,
                        "name": "Design Docs",
                        "tooltip": "Default Folder",
                        "isDefault": false,
                        "isFile": false,
                        "created": "2024-01-08T10:22:47.000Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid fields",
                  "details": [
                    {
                      "field": "folderName",
                      "issue": "Folder name is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Invalid teamId or parentId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invalid fields",
                  "details": [
                    {
                      "field": "parentId",
                      "issue": "Invalid parentId provided"
                    },
                    {
                      "field": "teamId",
                      "issue": "Invalid teamId provided"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict while creating folder",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to create the folder",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Folder"],
        "summary": "Fetch folders and files in a team workspace",
        "description": "Fetches a combined, paginated list of folders and files inside a team workspace. Supports root and child listings, mixed folder/file lists, pagination, sorting, searching, owner metadata, source metadata, backward-compatible isFile flag, and modern type field. This endpoint supports infinite scroll UI patterns.",
        "security": [
          {
            "bearerAuth": ["folders:read"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team whose folders and files are fetched",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "parentId",
            "in": "query",
            "description": "If null or omitted, fetch root items. If provided, fetch child items of the given folder.",
            "required": false,
            "schema": {
              "type": "integer",
              "nullable": true
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Sort items by field",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["name", "created", "updated"],
              "default": "created"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["asc", "desc"],
              "default": "asc"
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search text to match folder or file names (case-insensitive, partial match)",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Pagination offset for combined items",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Pagination limit for combined items",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Folders and files fetched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "message": { "type": "string" },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["folder", "file"]
                          },
                          "isFile": {
                            "type": "integer",
                            "enum": [0, 1],
                            "description": "Backward compatibility flag (0 = folder, 1 = file)"
                          },
                          "id": { "type": "integer" },
                          "teamId": { "type": "integer" },
                          "parentId": {
                            "type": "integer",
                            "nullable": true
                          },
                          "name": { "type": "string" },
                          "tooltip": { "type": "string" },
                          "size": {
                            "type": "integer",
                            "description": "File size in bytes (files only)"
                          },
                          "created": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "avatarUrl": { "type": "string" },
                          "ownerName": { "type": "string" },
                          "source": {
                            "type": "string",
                            "description": "Source of the file or folder (LocalUploads, OneDrive, Google Drive, Dropbox, etc.)"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "offset": { "type": "integer" },
                        "limit": { "type": "integer" },
                        "totalItems": { "type": "integer" },
                        "hasMore": { "type": "boolean" }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - access denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Invalid teamId or parentId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invalid fields",
                  "details": [
                    {
                      "field": "parentId",
                      "issue": "Invalid parentId provided"
                    },
                    {
                      "field": "teamId",
                      "issue": "Invalid teamId provided"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/files": {
      "post": {
        "tags": ["File"],
        "summary": "Create a new file",
        "description": "Creates a new file within a team's folder hierarchy. Validates team membership, folder ownership, duplicate filenames, and performs content analysis on the provided HTML string. The authenticated userId is extracted from the JWT token.",
        "security": [
          {
            "bearerAuth": ["files:create"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["fileName", "htmlString"],
                "properties": {
                  "fileName": {
                    "type": "string",
                    "description": "Name of the file to be created"
                  },
                  "parentId": {
                    "type": "integer",
                    "nullable": true,
                    "description": "ID of the parent folder; null or omitted means root-level"
                  },
                  "htmlString": {
                    "type": "string",
                    "description": "HTML/text content used for file analysis"
                  }
                }
              },
              "example": {
                "fileName": "notes",
                "parentId": 12345,
                "htmlString": "Hello Team"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "File created and analyzed successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "File created successfully, File analyzed successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing or invalid parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    { "field": "fileName", "issue": "fileName is required" },
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    },
                    {
                      "field": "htmlString",
                      "issue": "htmlString cannot be empty"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions (e.g., View Only)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "User does not have write access to this team"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Team or Parent Folder does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "not found",
                  "details": [
                    {
                      "field": "parentId",
                      "issue": "No folder exists with this parentId"
                    },
                    {
                      "field": "teamId",
                      "issue": "Provided teamId does not match any existing team"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Duplicate filename",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "A file with the same name already exists",
                  "details": [
                    {
                      "field": "fileName",
                      "issue": "Duplicate filename under the same parent folder"
                    }
                  ]
                }
              }
            }
          },
          "415": {
            "description": "Unsupported Media Type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Invalid content type",
                  "details": [
                    {
                      "field": "Content-Type",
                      "issue": "Only application/json is supported"
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - Content validation failed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Validation failed for one or more fields",
                  "details": [
                    {
                      "field": "htmlString",
                      "issue": "Provided HTML content is not valid"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/files/{fileId}": {
      "patch": {
        "tags": ["File"],
        "summary": "Update file content and metadata",
        "description": "Updates the content (HTML string) and metadata (filename or parent folder) of an existing file. Includes logic for file analysis and duplicate filename checks within the target folder.",
        "security": [
          {
            "bearerAuth": ["files:update"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fileId",
            "in": "path",
            "description": "Unique identifier of the file being updated",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["htmlString"],
                "properties": {
                  "fileName": {
                    "type": "string",
                    "description": "New filename (optional; used when updating both name and content)"
                  },
                  "parentId": {
                    "type": "integer",
                    "nullable": true,
                    "description": "ID of the parent folder; null or omitted means root-level"
                  },
                  "htmlString": {
                    "type": "string",
                    "description": "Updated HTML/Text content to analyze"
                  }
                }
              },
              "example": {
                "fileName": "updated-notes",
                "parentId": 7001,
                "htmlString": "Updated content"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "File updated and analyzed successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "File updated successfully, File analyzed successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing or invalid parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "fileId must be provided in the path"
                    },
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - User lacks update permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to update files",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "User is not a member of the specified company"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Resource does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "not found",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "No file exists with this fileId"
                    },
                    {
                      "field": "parentId",
                      "issue": "No folder exists with this parentId"
                    },
                    {
                      "field": "teamId",
                      "issue": "No team exists with this teamId"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Duplicate filename in destination folder",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Filename already exists under this folder",
                  "details": [
                    {
                      "field": "fileName",
                      "issue": "Duplicate filename detected"
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - Content analysis failed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "File content could not be analyzed",
                  "details": [
                    {
                      "field": "htmlString",
                      "issue": "Provided content could not be processed"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["File"],
        "summary": "Delete a file",
        "description": "Deletes an existing file. Supports two modes: Permanent Delete (irreversible) and Soft Delete (moves to Trash). Permanent delete is the default behavior.",
        "security": [
          {
            "bearerAuth": ["files:delete"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team where the file is uploaded",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fileId",
            "in": "path",
            "description": "Unique identifier of the file to delete",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "deletePermanently",
            "in": "query",
            "description": "If true or omitted, the file is permanently deleted. If false, the file is moved to trash.",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "requestBody": {
          "description": "Optional parentId context for validation",
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "parentId": {
                    "type": "integer",
                    "nullable": true,
                    "description": "ID of the parent folder; null or omitted for root-level"
                  }
                }
              },
              "examples": {
                "rootFile": {
                  "summary": "Root File",
                  "value": { "parentId": null }
                },
                "subFolderFile": {
                  "summary": "Sub-folder File",
                  "value": { "parentId": 2 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "File deleted successfully",
            "content": {
              "application/json": {
                "examples": {
                  "permanentDelete": {
                    "summary": "Permanent Delete (Default)",
                    "value": {
                      "success": true,
                      "message": "File permanently deleted"
                    }
                  },
                  "softDelete": {
                    "summary": "Soft Delete (Move to Trash)",
                    "value": {
                      "success": true,
                      "message": "File moved to trash successfully",
                      "file": {
                        "id": 55,
                        "name": "notes.html",
                        "type": "file"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    },
                    {
                      "field": "parentId",
                      "issue": "parentId must be provided"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to delete files",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "User does not have required permissions for this team"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "File not found",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "No file exists with this fileId"
                    },
                    {
                      "field": "teamId",
                      "issue": "teamId does not correspond to any team"
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - Invalid Parent Folder",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Invalid parent folder",
                  "details": [
                    {
                      "field": "parentId",
                      "issue": "No folder exists with this parentId"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["File"],
        "summary": "Download a file",
        "description": "Fetches a file as a binary stream. This allows clients to download and store files locally. Supports various formats including images, videos, PDFs, and office documents.",
        "security": [
          {
            "bearerAuth": ["files:read"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fileId",
            "in": "path",
            "description": "Unique identifier of the file to download",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "File binary data",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to access this file",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "User is not authorized for this team context"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "not found",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "No file exists with this fileId"
                    },
                    {
                      "field": "teamId",
                      "issue": "teamId does not correspond to any existing team"
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Invalid or unsupported file format",
                  "details": [
                    {
                      "field": "fileExtension",
                      "issue": "Unsupported file type"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/files/{fileId}/name": {
      "patch": {
        "tags": ["File"],
        "summary": "Rename an existing file",
        "description": "Updates only the filename of an existing file. Validates that the new name is different from the current name and that no other file with the same name exists in the target folder.",
        "security": [
          {
            "bearerAuth": ["files:rename"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team where the file is stored",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fileId",
            "in": "path",
            "description": "Unique identifier of the file to rename",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["fileName"],
                "properties": {
                  "fileName": {
                    "type": "string",
                    "description": "The new name for the file"
                  },
                  "parentId": {
                    "type": "integer",
                    "nullable": true,
                    "description": "ID of the parent folder; use null or omit for root"
                  }
                }
              },
              "example": {
                "fileName": "design-doc-v2",
                "parentId": 12345
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Filename updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Filename updated successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Missing or invalid parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    { "field": "fileName", "issue": "fileName is required" },
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    },
                    {
                      "field": "parentId",
                      "issue": "parentId must be provided"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to rename files",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "User does not have write access to this team"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - File or Team does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "File not found",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "No file exists with this fileId"
                    },
                    {
                      "field": "teamId",
                      "issue": "teamId does not correspond to any team"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Filename already exists in the folder",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Filename already exists under current folder",
                  "details": [
                    {
                      "field": "filename",
                      "issue": "Duplicate filename detected"
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - Same filename provided",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "New filename is same as old filename",
                  "details": [
                    {
                      "field": "newFileName",
                      "issue": "New filename must be different from the existing one"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{companyId}/usage": {
      "get": {
        "tags": ["Company", "Usage"],
        "summary": "Retrieve company's usage data",
        "description": "Fetches usage data for a company, including query usage, file storage usage, user count, recordings, and file sources.\n\nFiltering behavior:\n- If `day`, `month`, and `year` are provided â†’ fetch usage for that specific day.\n- If `month` and `year` are provided (without day) â†’ fetch usage for the entire month.\n- If only `year` is provided â†’ fetch usage for the entire year.\n- If no date parameters are provided â†’ fetch all available usage data.",
        "security": [{ "bearerAuth": ["company:usage:read"] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "ID of the company whose usage data is being fetched"
          },
          {
            "name": "day",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 31 },
            "description": "Day of the month (1â€“31)"
          },
          {
            "name": "month",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 12 },
            "description": "Month of the year (1â€“12)"
          },
          {
            "name": "year",
            "in": "query",
            "schema": { "type": "integer", "example": 2025 },
            "description": "Four-digit year"
          }
        ],
        "responses": {
          "200": {
            "description": "Company usage data fetched successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "queries": { "current": 0, "limit": 1000 },
                  "fileStorageSize": { "used": "2.86 MB", "limit": "5 GB" },
                  "noOfUsers": { "current": 1, "limit": 10 },
                  "recordings": { "count": 0, "limit": 30 },
                  "companyFileUploadSources": [
                    { "source": "Dropbox", "count": 1, "size": 0.02 },
                    { "source": "Google Drive", "count": 1, "size": 1560.01 },
                    { "source": "One Drive", "count": 4, "size": 1074.83 },
                    { "source": "Slack", "count": 2, "size": 0.02 },
                    { "source": "Upload", "count": 2, "size": 147.88 },
                    { "source": "Wordpress", "count": 2, "size": 80 }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid companyId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid companyId"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have access to this usage data",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found",
                  "details": ["Invalid companyId provided"]
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only GET method is supported",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "account is locked",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/files/upload/{teamId}": {
      "post": {
        "tags": ["File"],
        "summary": "Upload a file to a team folder",
        "description": "Uploads a binary file (image, video, document, etc.) to a specific team. If a file with the same name exists, the system automatically renames the new file (e.g., 'document (1).pdf'). Returns a jobId as processing happens asynchronously.",
        "security": [
          {
            "bearerAuth": ["files:write"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team where the file is uploaded",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["file", "source", "fileName"],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "The actual file to upload (Max 25MB)"
                  },
                  "fileName": {
                    "type": "string",
                    "description": "File name including extension (e.g., report.pdf)"
                  },
                  "source": {
                    "type": "string",
                    "description": "Source identifier (e.g., 'LocalUploads', 'OneDrive')"
                  },
                  "parentFolderId": {
                    "type": "integer",
                    "nullable": true,
                    "description": "Folder ID under which file will be stored; omit or null for root"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "File uploaded and processing started",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "jobId": 22,
                  "status": "pending",
                  "message": "File uploaded successfully. Processing has started."
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid path parameters",
                  "details": [
                    { "field": "teamId", "issue": "teamId is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to upload files",
                  "details": [
                    {
                      "field": "role",
                      "issue": "Role does not allow file upload"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Team Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team not found",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "No team exists with this ID"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Storage Limit Reached",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "You have reached maximum storage capacity",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - File too large",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "File size exceeds allowed limit",
                  "details": [
                    { "field": "file", "issue": "Maximum allowed size is 25MB" }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/folders/{folderId}": {
      "put": {
        "tags": ["Folder"],
        "summary": "Update folder metadata",
        "description": "Updates folder metadata such as name and description. This operation does not allow moving folders or changing hierarchy.",
        "security": [
          {
            "bearerAuth": ["folders:update"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team where the folder exists",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "folderId",
            "in": "path",
            "description": "Identifier of the folder to update",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "folderName": {
                    "type": "string",
                    "description": "New name for the folder"
                  },
                  "folderDescription": {
                    "type": "string",
                    "description": "Tooltip or description text for the folder"
                  }
                }
              },
              "examples": {
                "updateFolder": {
                  "summary": "Update folder name and description",
                  "value": {
                    "folderName": "Documents",
                    "folderDescription": "Updated description"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Folder updated successfully",
            "content": {
              "application/json": {
                "examples": {
                  "rootLevelFolder": {
                    "summary": "Folder updated at root level",
                    "value": {
                      "success": true,
                      "message": "Folder updated successfully",
                      "folder": {
                        "id": 42,
                        "teamId": 12,
                        "parentId": null,
                        "name": "Projects",
                        "tooltip": "Main project folder",
                        "isDefault": false,
                        "isFile": false,
                        "created": "2024-01-08T10:22:47.000Z",
                        "updated": "2025-11-19T11:05:00.000Z"
                      }
                    }
                  },
                  "subFolder": {
                    "summary": "Folder updated at sub level",
                    "value": {
                      "success": true,
                      "message": "Folder updated successfully",
                      "folder": {
                        "id": 42,
                        "teamId": 12,
                        "parentId": 5,
                        "name": "Projects",
                        "tooltip": "Main project folder",
                        "isDefault": false,
                        "isFile": false,
                        "created": "2024-01-08T10:22:47.000Z",
                        "updated": "2025-11-19T11:05:00.000Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid fields",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "Valid teamId is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Invalid teamId or folderId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invalid fields",
                  "details": [
                    {
                      "field": "folderId",
                      "issue": "Invalid folderId provided"
                    },
                    {
                      "field": "teamId",
                      "issue": "Invalid teamId provided"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict while updating folder",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to update the folder",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Folder"],
        "summary": "Delete a folder",
        "description": "Deletes a folder and all nested content.\n\nModes:\n- **Permanent Delete (default)**: Folder is permanently removed and cannot be restored.\n- **Soft Delete (Trash)**: Folder and nested content are moved to trash. Full structure is retained internally and accessible via the /trash API.",
        "security": [
          {
            "bearerAuth": ["folders:delete"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team where the folder exists",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "folderId",
            "in": "path",
            "description": "Unique identifier of the folder to delete",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "deletePermanently",
            "in": "query",
            "description": "If true or omitted, permanently deletes the folder. If false, moves the folder to trash.",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Folder deleted successfully",
            "content": {
              "application/json": {
                "examples": {
                  "permanentDelete": {
                    "summary": "Permanent delete (default)",
                    "value": {
                      "success": true,
                      "message": "Folder permanently deleted (including all child folders and files)"
                    }
                  },
                  "softDelete": {
                    "summary": "Soft delete (move to trash)",
                    "value": {
                      "success": true,
                      "message": "Folder moved to trash successfully",
                      "folder": {
                        "id": 18,
                        "name": "Projects",
                        "type": "folder"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid folderId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid folderId",
                  "details": [
                    {
                      "field": "folderId",
                      "issue": "Folder ID must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Invalid teamId or folderId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Invalid fields",
                  "details": [
                    {
                      "field": "folderId",
                      "issue": "Invalid folderId provided"
                    },
                    {
                      "field": "teamId",
                      "issue": "Invalid teamId provided"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "Conflict - folder cannot be deleted",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "This folder cannot be deleted",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },

    "/files/:fileId/name": {
      "patch": {
        "tags": ["Documents"],
        "summary": "Update File Name",
        "description": "Update filename for the HTML file.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fileId": {
                    "type": "integer",
                    "example": 1,
                    "description": "The unique identifier for the file."
                  },
                  "fileName": {
                    "type": "string",
                    "description": "The name of the folder."
                  },
                  "teamId": {
                    "type": "integer",
                    "example": 1,
                    "description": "The unique identifier for the team to which the folder belongs."
                  },
                  "parentId": {
                    "type": "integer",
                    "example": 1,
                    "description": "The unique identifier of the parent folder. Set to null if there is no parent folder."
                  }
                },
                "required": ["fileName", "teamId", "parentId", "fileId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Filename updated successfully"
                    }
                  }
                }
              }
            }
          },
          "200 ": {
            "description": "New name is same as old name",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Old filename is same as new filename"
                    }
                  }
                }
              }
            }
          },
          "200  ": {
            "description": "Filename already exists",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Filename.html already exist under current folder"
                    }
                  }
                }
              }
            }
          },
          "201  ": {
            "description": "Failed to update filename",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Failed to update the filename"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No token supplied.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No token supplied."
                    }
                  }
                }
              }
            }
          },
          "401 ": {
            "description": "Token Invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Token Invalid"
                    }
                  }
                }
              }
            }
          },
          "401  ": {
            "description": "Access Denied",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Access Denied"
                    }
                  }
                }
              }
            }
          },
          "401     ": {
            "description": "Invalid file",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid fileId provided"
                }
              }
            }
          },
          "401      ": {
            "description": "Team not exists",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid teamId provided"
                }
              }
            }
          },
          "400": {
            "description": "Missing Parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Missing parameters, fill all the required fields"
                }
              }
            }
          }
        }
      }
    },
    "/files/:fileId": {
      "delete": {
        "tags": ["Documents"],
        "summary": "Delete File",
        "description": "Delete a file and retrieve the updated list of files and folders.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fileId": {
                    "type": "integer",
                    "example": 1,
                    "description": "The unique identifier for the file."
                  },
                  "teamId": {
                    "type": "integer",
                    "example": 1,
                    "description": "The unique identifier for the team to which the file belongs."
                  },
                  "searchString": {
                    "type": "string",
                    "description": "Optional. Search string to filter files by name or description."
                  },
                  "parentId": {
                    "type": "integer",
                    "example": 1,
                    "description": "The unique identifier of the parent folder. Set to null if there is no parent folder."
                  }
                },
                "required": ["teamId", "fileId", "parentId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string",
                      "example": "File deleted successfully"
                    },
                    "filesAndFolders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "example": {
                          "id": 1,
                          "parentId": 2,
                          "teamId": 23,
                          "name": "DWSample1.pptx",
                          "tooltip": "",
                          "isDefault": 0,
                          "type": "file",
                          "created": "2024-01-09T10:26:40.000Z"
                        }
                      }
                    },
                    "predecessFolders": {
                      "type": "array"
                    }
                  }
                }
              }
            }
          },
          "200 ": {
            "description": "Success (no search string)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string",
                      "example": "File deleted successfully"
                    },
                    "filesAndFolders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "example": {
                          "id": 1,
                          "parentId": 2,
                          "teamId": 23,
                          "name": "DWSample1.pptx",
                          "tooltip": "",
                          "isDefault": 0,
                          "type": "file",
                          "created": "2024-01-09T10:26:40.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "201 ": {
            "description": "Failure",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Failed to delete file"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No token supplied.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No token supplied."
                    }
                  }
                }
              }
            }
          },
          "401 ": {
            "description": "Token Invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Token Invalid"
                    }
                  }
                }
              }
            }
          },
          "401  ": {
            "description": "Access Denied",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Access Denied"
                    }
                  }
                }
              }
            }
          },
          "401     ": {
            "description": "Invalid file",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid fileId provided"
                }
              }
            }
          },
          "401      ": {
            "description": "Team not exists",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid teamId provided"
                }
              }
            }
          },
          "400": {
            "description": "Missing Parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Missing parameters, fill all the required fields"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/folders/{parentId}/tree": {
      "get": {
        "tags": ["Folder"],
        "summary": "Fetch breadcrumb folder structure",
        "description": "Fetches the predecessor folders (breadcrumb path) for a given folder ID. The returned structure starts from the root-most parent and ends at the specified folder, allowing frontends to generate navigation paths (e.g., Sony / Notes / Reports /). Works for solo, team, and shared folders at any depth.",
        "security": [
          {
            "bearerAuth": ["folders:read"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "parentId",
            "in": "path",
            "description": "ID of the folder whose breadcrumb tree is requested",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Breadcrumb tree retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "predecessors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "parentId": { "type": "integer", "nullable": true },
                          "ownerId": { "type": "integer" },
                          "name": { "type": "string" },
                          "isFolder": { "type": "boolean" },
                          "isFile": { "type": "boolean" },
                          "created": { "type": "string", "format": "date-time" }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "predecessors": [
                    {
                      "id": 4,
                      "parentId": null,
                      "ownerId": 23,
                      "name": "Sony",
                      "isFolder": true,
                      "isFile": false,
                      "created": "2024-01-08T11:23:08.000Z"
                    },
                    {
                      "id": 7,
                      "parentId": 4,
                      "ownerId": 23,
                      "name": "Notes",
                      "isFolder": true,
                      "isFile": false,
                      "created": "2024-01-08T11:55:40.000Z"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "parentId",
                      "issue": "parentId must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to view this folder"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Folder not found"
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/chats": {
      "post": {
        "tags": ["Chat"],
        "summary": "Create a new chat",
        "description": "Creates a new chat session tied to a specific scope (Team, File, or Folder). The `resourceId` must correspond to the ID of the chosen scope (e.g., if scope is 'file', resourceId must be a valid fileId).",
        "security": [
          {
            "bearerAuth": ["chats:write"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "The unique ID of the team",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["scope", "resourceId"],
                "properties": {
                  "scope": {
                    "type": "string",
                    "enum": ["team", "file", "folder"],
                    "description": "The level at which the chat is initiated."
                  },
                  "resourceId": {
                    "type": "integer",
                    "description": "The ID of the target resource (teamId, fileId, or folderId) based on the scope."
                  }
                }
              },
              "examples": {
                "teamChat": {
                  "summary": "Team-level Chat",
                  "value": { "scope": "team", "resourceId": 12 }
                },
                "fileChat": {
                  "summary": "File-level Chat",
                  "value": { "scope": "file", "resourceId": 3 }
                },
                "folderChat": {
                  "summary": "Folder-level Chat",
                  "value": { "scope": "folder", "resourceId": 15 }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Chat created successfully",
            "content": {
              "application/json": {
                "examples": {
                  "teamSuccess": {
                    "summary": "Scope = team",
                    "value": {
                      "success": true,
                      "chat": {
                        "id": 3,
                        "scope": "team",
                        "resourceId": 12,
                        "teamId": 12,
                        "name": "New Chat",
                        "created": "2025-11-20T07:15:12.000Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    { "field": "scope", "issue": "This field is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team not found or user does not have access",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Chat could not be created for this user",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Invalid parameter combination",
                  "details": [
                    {
                      "field": "resourceId",
                      "issue": "resourceId must be a valid teamId when scope='team'"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Chat"],
        "summary": "Fetch chat histories",
        "description": "Fetches chat histories for the authenticated user within a specific team. Mobile apps typically fetch all chats, while web apps use 'scope' and 'resourceId' to filter chats by specific files or folders.",
        "security": [
          {
            "bearerAuth": ["chats:read"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "The unique ID of the team",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "scope",
            "in": "query",
            "description": "Filter chats by scope. Used primarily by Web clients.",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["team", "file", "folder"]
            }
          },
          {
            "name": "resourceId",
            "in": "query",
            "description": "The ID of the resource associated with the scope. Required if scope is provided. Special rule: If scope='team', resourceId must equal teamId.",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Keyword to filter chats by name or last message content.",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Chat histories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "userChatHistories": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "created": { "type": "string", "format": "date-time" }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "mobileAll": {
                    "summary": "Mobile App - All Chats",
                    "value": {
                      "success": true,
                      "userChatHistories": [
                        {
                          "id": 34,
                          "name": "General Chat",
                          "created": "2025-10-01T12:00:00.000Z"
                        },
                        {
                          "id": 56,
                          "name": "Invoice Discussion",
                          "created": "2025-11-19T09:01:22.000Z"
                        }
                      ]
                    }
                  },
                  "webFile": {
                    "summary": "Web App - File-level Chats",
                    "value": {
                      "success": true,
                      "userChatHistories": [
                        {
                          "id": 56,
                          "name": "Invoice Discussion",
                          "created": "2025-11-19T09:01:22.000Z"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team not found or user does not have access",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/chats/{chatId}": {
      "patch": {
        "tags": ["Chat"],
        "summary": "Rename a chat",
        "description": "Updates the display name of an existing chat session within a specific team. This operation is restricted to users with update permissions.",
        "security": [
          {
            "bearerAuth": ["chats:update"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "The unique ID of the team the chat belongs to",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "chatId",
            "in": "path",
            "description": "The unique identifier of the chat to rename",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "The new name for the chat session"
                  }
                }
              },
              "example": {
                "name": "Project Discussion"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chat renamed successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "chat": {
                    "id": 3,
                    "name": "Project Discussion",
                    "teamId": 12,
                    "updated": "2025-11-20T07:20:15.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    { "field": "name", "issue": "This field is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Chat not found",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Invalid name format",
                  "details": [
                    {
                      "field": "name",
                      "issue": "Name must be a non-empty string"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },

      "delete": {
        "tags": ["Chat"],
        "summary": "Delete an existing chat",
        "description": "Permanently deletes a chat session. Only users with the 'chats:delete' permission (typically Admin or Standard roles) can perform this action.",
        "security": [
          {
            "bearerAuth": ["chats:delete"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "The unique ID of the team the chat belongs to",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "chatId",
            "in": "path",
            "description": "The unique identifier of the chat to delete",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Chat deleted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Chat deleted successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid chatId parameter",
                  "details": [
                    { "field": "chatId", "issue": "Must be a valid number" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to delete this chat",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Chat not found",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to delete chat",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/chats/{chatId}/messages": {
      "get": {
        "tags": ["Chat"],
        "summary": "Fetch chat messages",
        "description": "Retrieves message history for a specific chat with bidirectional pagination support. Use 'before' to fetch older messages (scrolling up) and 'after' to fetch newer messages (scrolling down).",
        "security": [
          {
            "bearerAuth": ["messages:read"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Team where this chat exists"
          },
          {
            "name": "chatId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Chat ID for which messages are retrieved"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": { "type": "integer", "default": 50 },
            "description": "Number of messages to return"
          },
          {
            "name": "before",
            "in": "query",
            "required": false,
            "schema": { "type": "string", "format": "date-time" },
            "description": "ISO timestamp. Returns messages older than this (scroll up)."
          },
          {
            "name": "after",
            "in": "query",
            "required": false,
            "schema": { "type": "string", "format": "date-time" },
            "description": "ISO timestamp. Returns messages newer than this (scroll down)."
          }
        ],
        "responses": {
          "200": {
            "description": "Messages retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "chatMessages": [
                    {
                      "id": 10,
                      "chatId": 15,
                      "message": "Summarize file text.html",
                      "role": "user",
                      "source": null,
                      "created": "2025-01-07T11:41:30.000Z"
                    },
                    {
                      "id": 11,
                      "chatId": 15,
                      "message": "Here is the summary...",
                      "role": "bot",
                      "source": "file:text.html:22",
                      "replyTo": 10,
                      "created": "2025-01-07T11:41:32.000Z"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    { "field": "chatId", "issue": "Must be a valid number" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have access to this chat",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Chat not found",
                  "details": []
                }
              }
            }
          },
          "429": { "description": "Rate limit exceeded" },
          "500": { "description": "Server error" },
          "503": { "description": "Service unavailable" },
          "504": { "description": "Gateway timeout" }
        }
      },
      "post": {
        "tags": ["Chat"],
        "summary": "Add a message to a chat",
        "description": "Sends a new message to the conversation. The frontend typically sends a 'user' role message, and the system responds with the 'bot' message data, including citations and suggested follow-up questions.",
        "security": [
          {
            "bearerAuth": ["messages:create"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Team where this chat exists"
          },
          {
            "name": "chatId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Chat where the message will be added"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["message", "role"],
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "Content of the message"
                  },
                  "role": {
                    "type": "string",
                    "enum": ["user"],
                    "description": "The role of the message sender (typically 'user')"
                  }
                }
              },
              "example": {
                "message": "Summarise this file",
                "role": "user"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message added and bot response generated",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "messageData": {
                    "id": 479,
                    "chatId": 34,
                    "message": "Here is the summary...",
                    "role": "bot",
                    "source": "file:22",
                    "replyTo": 478,
                    "created": "2025-11-20T08:06:29.000Z",
                    "showFullCitation": false
                  },
                  "suggestedQuestions": []
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid fields",
                  "details": [
                    { "field": "message", "issue": "This field is required" },
                    { "field": "chatId", "issue": "This field is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have access to this chat",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Chat not found",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/me/avatar": {
      "put": {
        "tags": ["User Profile"],
        "summary": "Upload or replace user profile picture",
        "description": "Uploads or replaces the authenticated user's avatar/profile picture.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: user:profile:avatar:update.\n\nRate Limit:\n- 10 uploads per hour per user.",
        "security": [{ "bearerAuth": ["user:profile:avatar:update"] }],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "PNG, JPG, JPEG. Max recommended size: 5MB"
                  }
                },
                "required": ["image"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile picture updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Profile picture updated successfully",
                  "avatarUrl": "https://cdn.example.com/user/avatar.png"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing image file",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "No image file provided",
                  "details": []
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - user cannot update avatar",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to update user's avatar",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only POST method is supported",
                  "details": []
                }
              }
            }
          },
          "415": {
            "description": "Unsupported Media Type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Only PNG and JPG formats are allowed"
                }
              }
            }
          },
          "422": {
            "description": "Validation error - invalid image file",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Invalid image file",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and cannot update avatar",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{companyId}/2fa": {
      "post": {
        "tags": ["Company", "2FA"],
        "summary": "Enable or disable two-factor authentication for company users",
        "description": "Enables or disables Two-Factor Authentication (2FA) for all users in a company.\n\nAuthentication & Authorization:\n- Requires Bearer JWT token.\n- Requires scope: company:2fa:update.\n\nRate Limit:\n- 10 requests per hour per company.\n\nNotes:\n- `enabled` boolean is required.\n- `password` is required only if the user has a password set; it may be omitted for social accounts.",
        "security": [{ "bearerAuth": ["company:2fa:update"] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "ID of the company for which 2FA is being updated"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean",
                    "description": "true = enable 2FA, false = disable 2FA"
                  },
                  "password": {
                    "type": ["string", "null"],
                    "description": "Required only if company admin account has a password; may be null or omitted for social accounts"
                  }
                },
                "required": ["enabled"]
              },
              "example": {
                "enabled": true,
                "password": "myPassword123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "2FA update successful",
            "content": {
              "application/json": {
                "examples": {
                  "full_success": {
                    "summary": "All users updated successfully",
                    "value": {
                      "success": true,
                      "message": "Two-factor authentication enabled/disabled for all company users"
                    }
                  },
                  "partial_success": {
                    "summary": "Some users could not be updated",
                    "value": {
                      "success": true,
                      "message": "Two-factor authentication updated for some company users. Some users could not be updated.",
                      "warnings": [
                        { "userId": 12, "reason": "User already disabled" }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid companyId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid companyId"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions or account not verified",
            "content": {
              "application/json": {
                "examples": {
                  "no_permission": {
                    "summary": "User does not have permission",
                    "value": {
                      "success": false,
                      "error": "forbidden",
                      "message": "You do not have permission to disable company 2FA"
                    }
                  },
                  "account_not_verified": {
                    "summary": "Account not verified",
                    "value": {
                      "success": false,
                      "error": "forbidden",
                      "message": "Account not verified. Verify your account to modify 2FA settings"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - 2FA already enabled/disabled",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Two-factor authentication is already enabled/disabled for company",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Validation error - invalid password",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Invalid password provided",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/{userId}/profile": {
      "patch": {
        "tags": ["Admin", "Users"],
        "summary": "Update a user's profile details",
        "description": "Allows SuperAdmin or Admin to update user profile details such as firstname, lastname, email, language, phone number, role, and cloud integration settings.",

        "security": [{ "BearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number" },
            "description": "ID of the user to update"
          }
        ],

        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstname": { "type": "string" },
                  "lastname": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "mobileNumber": { "type": "string" },
                  "mobileCountryCode": { "type": "string" },
                  "language": { "type": "string" },
                  "role": { "type": "number" },
                  "userCloudIntegrationWeb": { "type": "boolean" },
                  "userCloudIntegrationMob": { "type": "boolean" }
                }
              },
              "examples": {
                "single_field": { "firstname": "John" },
                "multiple_fields": {
                  "firstname": "John",
                  "lastname": "Doe",
                  "userCloudIntegrationWeb": true
                },
                "all_fields": {
                  "firstname": "John",
                  "lastname": "Doe",
                  "email": "Johndoe@gmail.com",
                  "mobileNumber": "0000000000",
                  "language": "en",
                  "mobileCountryCode": "+91",
                  "role": 3
                }
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "User profile updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "User profile updated successfully",
                  "userData": {
                    "userId": "123",
                    "firstname": "John",
                    "lastname": "Doe",
                    "email": "john.doe@example.com",
                    "mobileCountryCode": "+91",
                    "mobileNumber": "1234567890",
                    "companyId": "45",
                    "role": 2,
                    "language": "en",
                    "userCloudIntegrationWeb": true,
                    "userCloudIntegrationMob": true,
                    "updated": "2025-11-23T18:22:47.000Z"
                  }
                }
              }
            }
          },

          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "companyId", "issue": "This field is required" }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized (missing or invalid JWT)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "409": {
            "description": "Conflict â€” email already exists",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Email already exists"
                }
              }
            }
          },

          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Server timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        },

        "rateLimit": "60 requests per minute",
        "roles": ["SuperAdmin", "Admin"],
        "cache": "No",
        "version": "v1"
      }
    },
    "/admin/users/{userId}/profile/avatar": {
      "put": {
        "tags": ["Admin", "Users"],
        "summary": "Update a user's profile avatar",
        "description": "Allows SuperAdmin or Admin to update the user's profile image. Accepts only multipart/form-data with a single image file (png/jpg/jpeg).",

        "security": [{ "BearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number" },
            "description": "ID of the user whose avatar is being updated"
          }
        ],

        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file (png/jpg/jpeg)"
                  }
                },
                "required": ["image"]
              },
              "examples": {
                "update_avatar": {
                  "summary": "Example request",
                  "value": "PUT /admin/users/74/profile/avatar\nContent-Type: multipart/form-data\navatar = <binary image file>"
                }
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "Profile picture updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Profile picture updated successfully",
                  "avatarUrl": "https://cdn.example.com/user/avatar.png"
                }
              }
            }
          },

          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "avatar", "issue": "Image file is required" }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized (missing or invalid JWT)",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "415": {
            "description": "Unsupported media type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be multipart/form-data"
                }
              }
            }
          },

          "422": {
            "description": "Invalid file type or file too large",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Invalid file type or file too large"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Server timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        },

        "rateLimit": "30 requests per minute",
        "roles": ["SuperAdmin", "Admin"],
        "cache": "No",
        "version": "v1"
      }
    },
    "/companies/{companyId}/profile": {
      "patch": {
        "tags": ["Company", "Profile"],
        "summary": "Update company profile fields",
        "description": "Updates one or more company profile fields. At least one field must be provided.",
        "security": [{ "bearerAuth": ["company:profile:update"] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "ID of the company whose profile is being updated"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "companyName": { "type": "string" },
                  "phoneNumber": { "type": "string" },
                  "phoneNumberCountryCode": { "type": "string" },
                  "orgType": { "type": "string" },
                  "language": { "type": "string" },
                  "mailingAddress": {
                    "type": "object",
                    "properties": {
                      "addressLine": { "type": "string" },
                      "country": { "type": "string" },
                      "city": { "type": "string" },
                      "state": { "type": "string" },
                      "postCode": { "type": "string" }
                    }
                  },
                  "billingAddress": {
                    "type": "object",
                    "properties": {
                      "addressLine": { "type": "string" },
                      "country": { "type": "string" },
                      "city": { "type": "string" },
                      "state": { "type": "string" },
                      "postCode": { "type": "string" }
                    }
                  }
                },
                "minProperties": 1
              },
              "examples": {
                "updateCompanyName": { "value": { "companyName": "Softcop" } },
                "updatePhone": {
                  "value": {
                    "phoneNumberCountryCode": "+1",
                    "phoneNumber": "9876543210"
                  }
                },
                "updatePartialMailingAddress": {
                  "value": { "mailingAddress": { "city": "New York" } }
                },
                "updateMultipleFields": {
                  "value": {
                    "companyName": "Softcop",
                    "phoneNumberCountryCode": "+1",
                    "phoneNumber": "9876543210",
                    "orgType": "Non Profit",
                    "language": "en",
                    "mailingAddress": { "city": "New York" },
                    "billingAddress": {
                      "addressLine": "Office 55",
                      "country": "US",
                      "city": "San Francisco",
                      "state": "California",
                      "postCode": "94104"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Company profile updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Company profile updated successfully",
                  "companyData": {
                    "companyId": 47,
                    "companyName": "Softcop",
                    "phoneNumberCountryCode": "+1",
                    "phoneNumber": "123454788",
                    "orgType": "Non Profit",
                    "language": "en",
                    "created": "2025-11-17T19:04:36.000Z",
                    "mailingAddress": {
                      "addressLine": "stew112",
                      "country": "US",
                      "city": "California",
                      "state": "San Francisco",
                      "postCode": "94104"
                    },
                    "billingAddress": {
                      "addressLine": "newSt1",
                      "country": "US",
                      "city": "San Francisco",
                      "state": "California",
                      "postCode": "94104"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No fields provided for update",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "No fields provided for update"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to update this company profile",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only PATCH method is supported",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Validation error - invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "One or more fields contain invalid values",
                  "details": [
                    {
                      "field": "phoneNumber",
                      "issue": "Invalid phone number format"
                    },
                    {
                      "field": "orgType",
                      "issue": "Value must be one of: Non Profit, Private, Government, Public"
                    },
                    {
                      "field": "mailingAddress.country",
                      "issue": "Invalid ISO country code"
                    }
                  ]
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and cannot be updated",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Company", "Profile"],
        "summary": "Fetch company profile details",
        "description": "Retrieves the company profile information for the specified company. Used exclusively on the Company Profile Screen.",
        "security": [{ "bearerAuth": ["company:profile:read"] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "ID of the company whose profile is being fetched"
          }
        ],
        "responses": {
          "200": {
            "description": "Company profile fetched successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Company profile fetched successfully",
                  "companyData": {
                    "companyId": 47,
                    "companyName": "Softcop",
                    "orgType": "Non Profit",
                    "created": "2025-11-17T19:04:36.000Z",
                    "phoneNumberCountryCode": "+1",
                    "phoneNumber": "9876543210",
                    "language": "en",
                    "mailingAddress": {
                      "addressLine": "stew112",
                      "country": "US",
                      "city": "California",
                      "state": "San Francisco",
                      "postCode": "94104"
                    },
                    "billingAddress": {
                      "addressLine": "newSt1",
                      "country": "US",
                      "city": "San Francisco",
                      "state": "San Francisco",
                      "postCode": "94104"
                    },
                    "companyLogo": "https://cdn.example.com/companies/logo47.png",
                    "companytwoFactorEnabled": false
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid companyId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid companyId",
                  "details": []
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to access this company's profile",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only GET method is supported",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable entity - profile data could not be processed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Profile data could not be processed",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "account is locked",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{companyId}/avatar": {
      "put": {
        "tags": ["Company", "Profile", "Avatar"],
        "summary": "Upload or replace company logo",
        "description": "Uploads or replaces the company's profile picture/logo. Accepts PNG, JPG, or JPEG files up to 5MB.",
        "security": [{ "bearerAuth": ["company:profile:avatar:update"] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "ID of the company whose avatar is being updated"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "PNG, JPG, or JPEG image file. Max size: 5MB"
                  }
                },
                "required": ["image"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Company logo updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Company logo updated successfully",
                  "companyLogo": "https://example.com/company-logos/new-logo.png"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - no image provided",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "No image file provided"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to update Company's avatar",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only POST method is supported",
                  "details": []
                }
              }
            }
          },
          "415": {
            "description": "Unsupported media type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Only PNG and JPG images are allowed"
                }
              }
            }
          },
          "422": {
            "description": "Validation error - invalid image file",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Invalid image file",
                  "details": []
                }
              }
            }
          },
          "423": {
            "description": "Account locked",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "locked",
                  "message": "Account is locked and cannot update avatar",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },

    "/files/upload": {
      "post": {
        "summary": "Upload and Analyze Document",
        "tags": ["Documents"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Document file to upload and analyze"
                  }
                },
                "required": ["file"]
              }
            }
          }
        },
        "parameters": [
          {
            "in": "query",
            "name": "teamId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID of the team where the document is uploaded"
          },
          {
            "in": "query",
            "name": "fileName",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Name of the File"
          },
          {
            "in": "query",
            "name": "parentId",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "source",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "File Upload Succesfull. Processing the file.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "fileId": {
                      "type": "number",
                      "example": 22
                    },
                    "status": {
                      "type": "string",
                      "example": "pending"
                    },
                    "message": {
                      "type": "string",
                      "example": "File uploaded successfully. Processing has started."
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "File already exists under current folder",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "File already exists under current folder"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No token supplied",
                      "description": "Error message indicating unauthorized access"
                    }
                  }
                }
              }
            }
          },
          "401 ": {
            "description": "Token Invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Token Invalid",
                      "description": "Error message indicating unauthorized access"
                    }
                  }
                }
              }
            }
          },
          "401    ": {
            "description": "Organization not exists",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid companyId provided"
                }
              }
            }
          },
          "401     ": {
            "description": "Invalid Role",
            "content": {
              "application/json": {
                "example": {
                  "message": "Invalid Role Id provided"
                }
              }
            }
          },
          "403     ": {
            "description": "Insufficient Role",
            "content": {
              "application/json": {
                "example": {
                  "message": "Insufficient user Role Id provided to upload a file"
                }
              }
            }
          },
          "400": {
            "description": "Missing Parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Missing parameters, fill all the required fields"
                }
              }
            }
          }
        }
      }
    },
    "/app-data": {
      "get": {
        "tags": ["System"],
        "summary": "Retrieve global application data",
        "description": "Returns all global configuration fields including branding, feature toggles, system limits, and role definitions. This endpoint is public and should be cached for 12â€“24 hours.",
        "responses": {
          "200": {
            "description": "App data fetched successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "App data fetched successfully",
                  "appData": {
                    "appLogo": "https://cdn.example.com/logo.png",
                    "appIcon": "https://cdn.example.com/icon.png",
                    "appName": "AI Bot",
                    "appTagline": "AI Revolution",
                    "appBotName": "Bot",
                    "paymentMode": false,
                    "socialAuth": false,
                    "signUpMode": false,
                    "multilanguage": true,
                    "token": "512",
                    "maxUsers": "10",
                    "maxQuery": "1000",
                    "maxStorage": "5",
                    "defaultResponseSuffix": "Response should be concise.",
                    "isDeleteAccount": false,
                    "chatMessages": [
                      "Please waitâ€¦",
                      "Let me processâ€¦",
                      "Hold onâ€¦"
                    ],
                    "roleData": [
                      { "id": 1, "role": "Administrator" },
                      { "id": 2, "role": "Standard" },
                      { "id": 3, "role": "View Only" }
                    ],
                    "maxFileUploads": [{ "meta_value": "10" }],
                    "paymentCurrencies": "['INR', 'GBP', 'EUR']",
                    "activeCurrencies": [
                      {
                        "currency": "USD",
                        "country": "United States",
                        "name": "US Dollar",
                        "symbol": "$",
                        "solo": "9",
                        "team": "79"
                      },
                      {
                        "currency": "EUR",
                        "country": "Eurozone countries",
                        "name": "Euro",
                        "symbol": "â‚¬",
                        "solo": "9",
                        "team": "76"
                      }
                    ],
                    "locationAccessKey": "sk_test_..."
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid request format",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Application data is unavailable",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/integrations": {
      "get": {
        "tags": ["Integrations"],
        "summary": "Fetch cloud integrations",
        "description": "Retrieves the status of cloud integrations (Google Drive, Dropbox, OneDrive, Slack, and WordPress) for the authenticated user. This data is used to toggle integration-specific features in the UI.",
        "security": [
          {
            "bearerAuth": ["integrations:read"]
          }
        ],
        "responses": {
          "200": {
            "description": "Integrations retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "integrations": [
                    {
                      "id": "integration_1",
                      "name": "GoogleDrive",
                      "active": true
                    },
                    {
                      "id": "integration_2",
                      "name": "Dropbox",
                      "active": true
                    },
                    {
                      "id": "integration_3",
                      "name": "OneDrive",
                      "active": true
                    },
                    {
                      "id": "integration_4",
                      "name": "Slack",
                      "active": true
                    },
                    {
                      "id": "integration_5",
                      "name": "WordPress",
                      "active": true
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Access denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have access to this user's integrations"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found or integrations unavailable"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/users/{userId}/profile/avatar": {
      "put": {
        "tags": ["Super Admin"],
        "summary": "Upload or Replace User Profile Avatar",
        "description": "Updates a user's profile picture. Accepts only multipart/form-data with JPEG/PNG images. Works for both solo and organization users. Does not modify any other user fields.",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "example": "123" },
            "description": "The unique identifier of the target user."
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "JPEG or PNG image file."
                  }
                },
                "required": ["image"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile picture updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Profile picture updated successfully",
                  "avatarUrl": "https://cdn.example.com/user/avatar.png"
                }
              }
            }
          },
          "400": {
            "description": "Invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "image", "issue": "Image file is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden â€” insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to update this user's profile avatar",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Only PUT method is supported",
                  "details": []
                }
              }
            }
          },
          "415": {
            "description": "Unsupported media type â€” must be multipart/form-data",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be multipart/form-data"
                }
              }
            }
          },
          "429": {
            "description": "Rate limited â€” too many requests",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout â€” upstream service did not respond",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/users/{userId}/profile": {
      "patch": {
        "tags": ["Super Admin"],
        "summary": "Update User Profile Details",
        "description": "Updates a userâ€™s profile details including firstname, lastname, email, mobileNumber, countryCode, password, role, companyId (org users only), and more. Supports partial updates. Enforces rules depending on account type:\n\n- **Solo users** â†’ must have role = 1, `companyId` is forbidden.\n- **Organization users** â†’ must include a valid `companyId`, and allowed roles are 1, 2, or 3.",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "example": "123" },
            "description": "Target user ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstname": { "type": "string" },
                  "lastname": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "countryCode": { "type": "string", "example": "+1" },
                  "mobileNumber": { "type": "string" },
                  "companyId": {
                    "type": "string",
                    "description": "Required for organization users. Forbidden for solo users."
                  },
                  "role": {
                    "type": "integer",
                    "description": "Solo users must have role=1. Org users allowed: 1,2,3."
                  },
                  "password": { "type": "string" },
                  "twoFactorAuth": { "type": "boolean" },
                  "userCloudIntegrationWeb": { "type": "boolean" },
                  "userCloudIntegrationMob": { "type": "boolean" },
                  "language": { "type": "string", "example": "en" }
                }
              },
              "example": {
                "firstname": "John",
                "lastname": "Doe",
                "email": "john.doe@example.com",
                "countryCode": "+91",
                "mobileNumber": "1234567890",
                "role": 2,
                "twoFactorAuth": true,
                "language": "en",
                "userCloudIntegrationMob": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User profile updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "User profile updated successfully",
                  "userData": {
                    "userId": "123",
                    "firstname": "John",
                    "lastname": "Doe",
                    "email": "john.doe@example.com",
                    "countryCode": "+91",
                    "mobileNumber": "1234567890",
                    "role": 2,
                    "language": "en",
                    "userCloudIntegrationWeb": true,
                    "userCloudIntegrationMob": true,
                    "twoFactorAuth": true,
                    "updated": "2025-11-23T18:22:47.000Z"
                  }
                }
              }
            }
          },

          "400": {
            "description": "Bad Request â€” invalid or missing fields, role/companyId violations",
            "content": {
              "application/json": {
                "examples": {
                  "solo_user_sent_companyId": {
                    "summary": "Solo user cannot send companyId",
                    "value": {
                      "success": false,
                      "error": "bad_request",
                      "message": "Invalid or missing fields",
                      "details": [
                        {
                          "field": "companyId",
                          "issue": "Solo users cannot have companyId"
                        }
                      ]
                    }
                  },
                  "org_user_missing_companyId": {
                    "summary": "Org user missing required companyId",
                    "value": {
                      "success": false,
                      "error": "bad_request",
                      "message": "Invalid or missing fields",
                      "details": [
                        {
                          "field": "companyId",
                          "issue": "companyId is required for organization users"
                        }
                      ]
                    }
                  },
                  "solo_user_invalid_role": {
                    "summary": "Solo user attempted to set role != 1",
                    "value": {
                      "success": false,
                      "error": "bad_request",
                      "message": "Invalid role for solo account",
                      "details": [
                        {
                          "field": "role",
                          "issue": "Solo users must have role = 1"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” lacking permission",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Not allowed to update this user profile"
                }
              }
            }
          },

          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },

          "422": {
            "description": "Unprocessable Entity â€” validation errors",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "Validation errors",
                  "details": [
                    {
                      "field": "email",
                      "issue": "Invalid email format"
                    }
                  ]
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/companies/{companyId}/profile": {
      "patch": {
        "tags": ["Super Admin"],
        "summary": "Partially Update Company Profile",
        "description": "Partially updates a companyâ€™s profile details including company name, phone number, country code, organization type, mailing/billing addresses, 2FA settings, and cloud-related fields. Supports partial updatesâ€”only provided fields are updated. This endpoint does not handle image uploads (handled by the avatar endpoint).",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "example": "45" },
            "description": "The unique identifier for the company being updated."
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "companyName": { "type": "string" },
                  "phoneNumber": { "type": "string" },
                  "phoneNumberCountryCode": {
                    "type": "string",
                    "example": "+1"
                  },
                  "orgType": { "type": "string" },
                  "language": {
                    "type": "string",
                    "example": "en",
                    "description": "ISO language code"
                  },
                  "companyTwoFactorAuth": { "type": "boolean" },

                  "mailingAddress": {
                    "type": "object",
                    "properties": {
                      "addressLine": { "type": "string" },
                      "country": { "type": "string" },
                      "city": { "type": "string" },
                      "state": { "type": "string" },
                      "postCode": { "type": "string" }
                    }
                  },

                  "billingAddress": {
                    "type": "object",
                    "properties": {
                      "addressLine": { "type": "string" },
                      "country": { "type": "string" },
                      "city": { "type": "string" },
                      "state": { "type": "string" },
                      "postCode": { "type": "string" }
                    }
                  }
                }
              },
              "examples": {
                "update_company_name": {
                  "summary": "Update only companyName",
                  "value": { "companyName": "Softcop" }
                },
                "update_phone_fields": {
                  "summary": "Update phone number fields",
                  "value": {
                    "phoneNumberCountryCode": "+1",
                    "phoneNumber": "9876543210"
                  }
                },
                "update_partial_mailing_address": {
                  "summary": "Update only one field in mailingAddress",
                  "value": {
                    "mailingAddress": { "city": "New York" }
                  }
                },
                "update_full_mailing_address": {
                  "summary": "Update all mailing address fields",
                  "value": {
                    "mailingAddress": {
                      "addressLine": "123 Main St",
                      "country": "US",
                      "city": "San Francisco",
                      "state": "California",
                      "postCode": "94104"
                    }
                  }
                }
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "Company profile updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Company profile updated successfully",
                  "companyData": {
                    "companyId": "45",
                    "companyName": "Tech Corp",
                    "orgType": "Private",
                    "phoneNumberCountryCode": "+1",
                    "phoneNumber": "1234567890",
                    "companyTwoFactorAuth": true,
                    "language": "en",
                    "mailingAddress": {
                      "street": "123 Main St",
                      "city": "Metropolis",
                      "state": "NY",
                      "country": "US",
                      "zipCode": "10001"
                    },
                    "billingAddress": {
                      "street": "123 Main St",
                      "city": "Metropolis",
                      "state": "NY",
                      "country": "US",
                      "zipCode": "10001"
                    },
                    "updated": "2025-11-23T18:55:47.000Z"
                  }
                }
              }
            }
          },

          "400": {
            "description": "Bad Request â€” invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "phoneNumber",
                      "issue": "Invalid phone number format"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” admin not allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Not allowed to update this company"
                }
              }
            }
          },

          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/companies/{companyId}/profile/avatar": {
      "put": {
        "tags": ["Super Admin"],
        "summary": "Upload or Replace Company Profile Avatar",
        "description": "Replaces the companyâ€™s profile picture/logo. Accepts only a single PNG or JPEG image file using multipart/form-data. This endpoint only updates the company's avatar and does not modify any other company fields.",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "example": "45" },
            "description": "ID of the company whose avatar is being replaced."
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "PNG or JPEG file. Only one file allowed."
                  }
                },
                "required": ["image"]
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "Company avatar updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Company avatar updated successfully",
                  "avatarUrl": "https://cdn.example.com/company/avatar.png"
                }
              }
            }
          },

          "400": {
            "description": "Bad Request â€” missing or invalid image",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "image", "issue": "Image file is required" }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing/invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found"
                }
              }
            }
          },

          "415": {
            "description": "Unsupported media type â€” must use multipart/form-data",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unsupported_media_type",
                  "message": "Content-Type must be multipart/form-data"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/clients": {
      "get": {
        "tags": ["Super Admin"],
        "summary": "Retrieve List of Clients",
        "description": "Returns a list of clients managed under the system. Supports optional pagination and filtering. Only accessible by Super Admin users.",
        "security": [{ "bearerAuth": [] }],

        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": { "type": "integer", "minimum": 1, "example": 1 },
            "description": "Page number for paginated results."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "example": 20
            },
            "description": "Number of items per page."
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": { "type": "string", "example": "John" },
            "description": "Search term to filter clients by name, email, or other fields."
          }
        ],

        "responses": {
          "200": {
            "description": "Clients list retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Clients retrieved successfully",
                  "pagination": {
                    "page": 1,
                    "limit": 20,
                    "totalItems": 152,
                    "totalPages": 8
                  },
                  "clients": [
                    {
                      "clientId": "C-001",
                      "firstname": "John",
                      "lastname": "Doe",
                      "email": "john.doe@example.com",
                      "companyId": "45",
                      "role": 1,
                      "status": "active",
                      "created": "2025-07-21T10:12:45.000Z"
                    },
                    {
                      "clientId": "C-002",
                      "firstname": "Jane",
                      "lastname": "Smith",
                      "email": "jane.smith@example.com",
                      "companyId": "48",
                      "role": 2,
                      "status": "inactive",
                      "created": "2025-07-18T15:42:10.000Z"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Not allowed to access client list"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/notifications": {
      "get": {
        "tags": ["Notification"],
        "summary": "Retrieve list of notifications",
        "description": "Fetches a list of all notifications for the authenticated user. Notifications include system alerts, chat updates, and file processing status. The list remains static until a new notification is generated or an existing one is deleted.",
        "security": [
          {
            "bearerAuth": ["notifications:read"]
          }
        ],
        "responses": {
          "200": {
            "description": "Notifications retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "notifications": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "title": { "type": "string" },
                          "message": { "type": "string" },
                          "objectId": { "type": "integer" },
                          "type": { "type": "string" },
                          "isViewed": { "type": "boolean" },
                          "created": { "type": "string", "format": "date-time" }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "notifications": [
                    {
                      "id": 401,
                      "title": "New message",
                      "message": "You have a new message",
                      "objectId": 346,
                      "type": "chat_update",
                      "isViewed": false,
                      "created": "2024-08-29T11:51:15.000Z"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/notification/{id}": {
      "delete": {
        "tags": ["Notification"],
        "summary": "Delete a notification",
        "description": "Permanently removes a specific notification from the user's list using the notification ID.",
        "security": [
          {
            "bearerAuth": ["notifications:delete"]
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "The unique identifier of the notification to delete",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification deleted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Notification deleted"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Notification not found"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/notifications/viewed": {
      "patch": {
        "tags": ["Notification"],
        "summary": "Mark all notifications as viewed",
        "description": "Updates the 'isViewed' status to true for all notifications belonging to the authenticated user.",
        "security": [
          {
            "bearerAuth": ["notifications:update"]
          }
        ],
        "responses": {
          "200": {
            "description": "All notifications marked as viewed successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "All notifications marked as viewed"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/files/jobs/{id}/retry": {
      "post": {
        "tags": ["File Jobs"],
        "summary": "Retry a failed file-processing job",
        "description": "Requests the system to retry a previously failed file-processing job. Typical use case: File upload succeeded, but the job entered a 'failed' status during analysis. This endpoint restarts the job, allowing the client to resume polling via the /status endpoint.",
        "security": [
          {
            "bearerAuth": ["files:write"]
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "The unique job identifier to retry",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Retry initiated. Job re-queued for processing.",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "jobId": "12345",
                  "message": "Retry initiated. Job re-queued for processing."
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid jobId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid jobId provided",
                  "details": [
                    {
                      "field": "jobId",
                      "issue": "Invalid or malformed"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to retry jobs",
                  "details": [
                    {
                      "field": "role",
                      "issue": "Unauthorized for retry action"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Job does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "File upload job not found",
                  "details": [
                    {
                      "field": "jobId",
                      "issue": "No matching job exists"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/files/jobs/{id}/status": {
      "get": {
        "tags": ["File"],
        "summary": "Check file processing job status",
        "description": "Fetches the current status of an asynchronous file-processing job. Clients should poll this endpoint at regular intervals (e.g., every 2â€“3 seconds). Returns the current state (pending, processing, completed, failed) and progress percentage.",
        "security": [
          {
            "bearerAuth": ["files:read"]
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Identifier of the file upload job",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "jobId": { "type": "string" },
                    "state": {
                      "type": "string",
                      "enum": ["pending", "processing", "completed", "failed"]
                    },
                    "progress": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 100
                    }
                  }
                },
                "examples": {
                  "completed": {
                    "summary": "Completed",
                    "value": {
                      "success": true,
                      "jobId": "12345",
                      "state": "completed",
                      "progress": 100
                    }
                  },
                  "processing": {
                    "summary": "Processing",
                    "value": {
                      "success": true,
                      "jobId": "12345",
                      "state": "processing",
                      "progress": 45
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    { "field": "jobId", "issue": "jobId is required" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "File upload job not found",
                  "details": [
                    { "field": "jobId", "issue": "No job exists with this ID" }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/settings/max-uploads": {
      "get": {
        "tags": ["Settings"],
        "summary": "Retrieve maximum batch upload limit",
        "description": "Retrieves the maximum number of files a user is allowed to upload in a single batch or at once. This is a global system setting used by clients to enforce UI-level limits.",
        "security": [
          {
            "bearerAuth": ["settings:read"]
          }
        ],
        "responses": {
          "200": {
            "description": "Maximum file upload limit retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "maxUploads": 10,
                  "message": "Maximum file upload limit retrieved successfully"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/settings/recording-prompt-time": {
      "get": {
        "tags": ["Settings"],
        "summary": "Retrieve recording prompt duration",
        "description": "Returns the duration (in minutes) after which the mobile or web app should prompt the user to either continue recording or upload the current session to the server.",
        "security": [
          {
            "bearerAuth": ["settings:read"]
          }
        ],
        "responses": {
          "200": {
            "description": "Prompt time retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "promptTime": 30
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Access denied",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Recording usage data not found for the user",
                  "details": []
                }
              }
            }
          },
          "405": {
            "description": "Method Not Allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "Use GET method for this endpoint",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Conflict while retrieving recording limit",
                  "details": []
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/share": {
      "post": {
        "tags": ["Team"],
        "summary": "Share a team with another user",
        "description": "Shares a team with another user. If the recipient is in the same company and already has access, no action is taken. If the recipient is a solo user or belongs to another company, the team is shared to their 'Shared with me' list without adding them to the company or team. If the email does not belong to a registered user, an invitation email is sent. Sender identity is derived from the Bearer token.",
        "security": [
          {
            "bearerAuth": ["teams:share"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team to be shared",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email of the user with whom the team is being shared"
                  }
                }
              },
              "examples": {
                "shareTeam": {
                  "summary": "Share team with a user by email",
                  "value": {
                    "email": "user@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Team shared or invitation handled successfully",
            "content": {
              "application/json": {
                "examples": {
                  "alreadyHasAccess": {
                    "summary": "User already has access",
                    "value": {
                      "success": true,
                      "message": "User already has access to this team"
                    }
                  },
                  "teamShared": {
                    "summary": "Team shared with existing user",
                    "value": {
                      "success": true,
                      "message": "Team shared successfully"
                    }
                  },
                  "invitationSent": {
                    "summary": "Invitation sent to unregistered user",
                    "value": {
                      "success": true,
                      "message": "Invitation sent successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid fields",
                  "details": [
                    {
                      "field": "email",
                      "issue": "A valid email address is required"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access Denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Team not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team does not exist",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict while sharing team",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Failed to send invitation",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "Validation failed",
                  "details": [
                    {
                      "field": "email",
                      "issue": "invalid email format"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/items": {
      "get": {
        "tags": ["Folder", "File"],
        "summary": "Fetch all folders or files under a team",
        "description": "Returns all folders or files created under a team, including root-level items, subfolders, and nested child items at any depth. By default, only folders are returned unless the type query parameter is set to `file`.",
        "security": [
          {
            "bearerAuth": ["folders:read"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "Unique identifier of the team whose folders or files are requested",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Type of items to fetch. Defaults to `folder` if omitted.",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["folder", "file"],
              "default": "folder"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Items retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "message": { "type": "string" },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "description": "Unique identifier of the folder or file"
                          },
                          "name": {
                            "type": "string",
                            "description": "Name of the folder or file"
                          },
                          "parentId": {
                            "type": "integer",
                            "nullable": true,
                            "description": "Parent folder ID; null for root-level items"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "foldersOnly": {
                    "summary": "Folders only (default)",
                    "value": {
                      "success": true,
                      "message": "items retrieved successfully",
                      "items": [
                        {
                          "id": 1,
                          "name": "Documents",
                          "parentId": null
                        },
                        {
                          "id": 22,
                          "name": "Invoices",
                          "parentId": 432
                        }
                      ]
                    }
                  },
                  "filesOnly": {
                    "summary": "Files only",
                    "value": {
                      "success": true,
                      "message": "items retrieved successfully",
                      "items": [
                        {
                          "id": 1,
                          "name": "newImage.png",
                          "parentId": null
                        },
                        {
                          "id": 22,
                          "name": "Invoices.pdf",
                          "parentId": 221
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid parameters",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "teamId must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing, expired, or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - user does not have access to the team",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to access this team",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "User is not a member of this team"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Team not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Team not found",
                  "details": [
                    {
                      "field": "teamId",
                      "issue": "No team exists with this ID"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/companies/{companyId}/usage/last-month": {
      "get": {
        "tags": ["Super Admin"],
        "summary": "Get Last Month's Usage for a Company",
        "description": "Fetches aggregated usage analytics for the previous calendar month for a team/company. Includes total usage across all team members: total queries, storage used, number of collections, active users, subscription plan, and backend-detected month/year.",
        "security": [{ "bearerAuth": [] }],

        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "required": true,
            "schema": { "type": "number", "example": 45 },
            "description": "ID of the company whose usage data is being fetched"
          }
        ],

        "responses": {
          "200": {
            "description": "Usage data retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "usage": {
                    "companyId": 45,
                    "plan": "team",
                    "numberOfCollections": 12,
                    "numberOfUsers": 8,
                    "storageUsed": "120GB",
                    "numberOfQueries": 5320,
                    "month": 10,
                    "monthName": "October",
                    "year": 2024,
                    "created": "2024-11-05T09:22:10Z"
                  }
                }
              }
            }
          },

          "400": {
            "description": "Bad Request â€” invalid or missing companyId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "companyId",
                      "issue": "companyId must be a valid number"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” invalid or missing token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” only Super Admins can access usage analytics",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Only Super Admins can view company usage"
                }
              }
            }
          },

          "404": {
            "description": "Not Found â€” no usage data for that company for last month",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "No usage data found for this company for last month"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/users/{userId}/usage/last-month": {
      "get": {
        "tags": ["Super Admin"],
        "summary": "Get Last Month's Usage for a User",
        "description": "Fetches individual usage analytics for a solo user or a team member. Returns only this user's usage, not aggregated company usage. If the user belongs to a company, companyId and plan are inherited from the company. If the user is solo, companyId = null and plan = 'solo'. Month and year are auto-detected by the backend.",
        "security": [{ "bearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number", "example": 789 },
            "description": "ID of the user whose usage data is being fetched"
          }
        ],

        "responses": {
          "200": {
            "description": "User usage data retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "usage": {
                    "userId": 789,
                    "companyId": null,
                    "plan": "solo",
                    "numberOfCollections": 3,
                    "storageUsed": "8GB",
                    "numberOfQueries": 450,
                    "month": 10,
                    "monthName": "October",
                    "year": 2024,
                    "created": "2024-11-05T09:22:10Z"
                  }
                }
              }
            }
          },

          "400": {
            "description": "Bad Request â€” invalid or missing userId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "userId",
                      "issue": "userId must be a valid number"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” invalid or missing token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” only Super Admins can access user usage",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Only Super Admins can view user usage"
                }
              }
            }
          },

          "404": {
            "description": "Not Found â€” no usage data for this user for last month",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "No usage data found for this user for last month"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/users/{userId}/role": {
      "get": {
        "tags": ["Super Admin"],
        "summary": "Check if a user is Super Admin",
        "description": "Checks whether a specific user has the Super Admin role. Returns a boolean flag `isSuperAdmin`. Always returns 200 OK for successful requests. Only accessible by Super Admins.",
        "security": [{ "bearerAuth": [] }],

        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "number", "example": 12345 },
            "description": "ID of the user whose Super Admin role is being checked"
          }
        ],

        "responses": {
          "200": {
            "description": "User role retrieved successfully",
            "content": {
              "application/json": {
                "examples": {
                  "isSuperAdmin": {
                    "summary": "User is a Super Admin",
                    "value": {
                      "success": true,
                      "userId": 12345,
                      "isSuperAdmin": true
                    }
                  },
                  "notSuperAdmin": {
                    "summary": "User is not a Super Admin",
                    "value": {
                      "success": true,
                      "userId": 12345,
                      "isSuperAdmin": false
                    }
                  }
                }
              }
            }
          },

          "400": {
            "description": "Bad Request â€” invalid or missing userId",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "userId",
                      "issue": "userId must be a valid number"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” only Super Admins can check user roles",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Only Super Admins can check user roles"
                }
              }
            }
          },

          "404": {
            "description": "Not Found â€” user does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/me/subscription": {
      "get": {
        "tags": ["Subscription", "User"],
        "summary": "Get authenticated user's subscription",
        "description": "Returns subscription details for the authenticated user. The user identity is resolved directly from the JWT access token.\n\nRate Limits:\n- 30 requests per minute.\n\nTimeout:\n- 30 seconds.\n\nSecurity:\n- Requires Bearer JWT authentication.\n- Requires scope: subscription:read.\n- Accessible by Admin and Standard users.",
        "security": [
          {
            "bearerAuth": ["subscription:read"]
          }
        ],
        "parameters": [
          {
            "name": "x-api-version",
            "in": "header",
            "required": true,
            "description": "API version header",
            "schema": {
              "type": "string",
              "example": "v1"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription details retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "subscriptionData": {
                    "id": 21,
                    "userId": 71,
                    "payment_id": "evt_1SXjOULPjGaTqNRb0TnQGX3E",
                    "subscription_type": "Solo",
                    "subscription_amount": 776,
                    "currency": "INR",
                    "payment_status": 1,
                    "subscriptionId": "sub_1SXjOSLPjGaTqNRbM4TjtS2X",
                    "customerId": "cus_TUiq7G2OZXuKQU",
                    "created": "2025-11-26T14:08:31.000Z",
                    "deactivated": null
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to view subscription data"
                }
              }
            }
          },
          "404": {
            "description": "Subscription not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Subscription not found"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/files/upload/audio/{teamId}": {
      "post": {
        "tags": ["File"],
        "summary": "Upload an audio file",
        "description": "Uploads an audio file (.wav, .m4a) to a team folder. Validates storage capacity and processes the file for transcription/summary. If a file with the same name exists, the backend automatically renames the new file (e.g., 'document (1).wav').",
        "security": [
          {
            "bearerAuth": ["files:write"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team where the file is uploaded",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["file", "fileName"],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "The audio file to upload (.wav or .m4a)"
                  },
                  "fileName": {
                    "type": "string",
                    "description": "File name including extension (e.g., report.wav)"
                  },
                  "parentFolderId": {
                    "type": "integer",
                    "description": "Folder ID under which file will be stored; omit for root"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "File uploaded successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "File uploaded successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    { "field": "folderId", "issue": "Must be a valid number" },
                    { "field": "fileName", "issue": "Must be provided" }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied",
                  "details": []
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "teamId not found",
                  "details": []
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Storage Limit",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "You have reached maximum storage capacity",
                  "details": []
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - File Size",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unprocessable_entity",
                  "message": "File size exceeds allowed limit",
                  "details": [
                    { "field": "file", "issue": "Maximum allowed size is 25MB" }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/settings/recording-limit": {
      "get": {
        "tags": ["Settings"],
        "summary": "Retrieve account recording limit and usage",
        "description": "Fetches the current number of recordings used and the total monthly limit allowed for the authenticated account. This allows clients to display usage bars or restrict recording features when limits are reached.",
        "security": [
          {
            "bearerAuth": ["settings:read"]
          }
        ],
        "responses": {
          "200": {
            "description": "Recording limit fetched successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Recording limit fetched successfully",
                  "data": {
                    "count": 8,
                    "limit": 100
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid request format",
                  "details": []
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate Limit Exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server Error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/files/{fileId}/summary": {
      "get": {
        "tags": ["File"],
        "summary": "Retrieve file summary",
        "description": "Retrieves the processed summary data for a specific file, including a general overview and extracted notes. This data is typically generated during the file analysis phase.",
        "security": [
          {
            "bearerAuth": ["files:read"]
          }
        ],
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of the team where the file is uploaded",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "fileId",
            "in": "path",
            "description": "The unique identifier of the file whose summary is being requested",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Summary retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Summary retrieved successfully",
                  "summary": {
                    "id": 4,
                    "fileId": 8,
                    "teamId": 12,
                    "fileName": "example_file.txt",
                    "overview": "This document covers the project milestones for Q4...",
                    "notes": "Ensure that the stakeholder review is completed by Friday.",
                    "created": "2025-11-19T19:13:08.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Missing or invalid parameters",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "fileId must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    },
                    {
                      "field": "Authorization",
                      "issue": "Token is expired or malformed"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "User does not have permission to access this file",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "Access restricted for this file"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "not found",
                  "details": [
                    {
                      "field": "fileId",
                      "issue": "No summary exists for this file"
                    },
                    {
                      "field": "fileId",
                      "issue": "No file exists with this ID"
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/usage/last-month": {
      "put": {
        "tags": ["Super Admin"],
        "summary": "Insert Last Month's Usage Record",
        "description": "Inserts a new monthly usage record into the `lastmonthusage` table **only if no record already exists** for that month. This endpoint never updates existing records and is used when the system detects usage for a previously unseen month.",
        "security": [{ "bearerAuth": [] }],

        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "statId": {
                    "type": "number",
                    "description": "Optional stat identifier (may be auto-generated)"
                  },
                  "name": { "type": "string" },
                  "plan": { "type": "string" },
                  "numberOfTeams": { "type": "number" },
                  "numberOfUsers": { "type": "number" },
                  "storageUsed": { "type": "string" },
                  "numberOfQueries": { "type": "number" },
                  "monthName": { "type": "string" },
                  "year": { "type": "number" }
                },
                "required": [
                  "name",
                  "plan",
                  "numberOfTeams",
                  "numberOfUsers",
                  "storageUsed",
                  "numberOfQueries",
                  "monthName",
                  "year"
                ]
              },
              "example": {
                "statId": 1,
                "name": "Company A",
                "plan": "team",
                "numberOfTeams": 5,
                "numberOfUsers": 10,
                "storageUsed": "50GB",
                "numberOfQueries": 1000,
                "monthName": "July",
                "year": 2024
              }
            }
          }
        },

        "responses": {
          "200": {
            "description": "Usage record inserted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Last month's usage data inserted successfully"
                }
              }
            }
          },

          "400": {
            "description": "Bad Request â€” missing or invalid fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    { "field": "monthName", "issue": "This field is required" },
                    { "field": "year", "issue": "This field is required" }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” insufficient permissions",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You do not have permission to access this resource",
                  "details": [
                    { "field": "role", "issue": "SuperAdmin role required" }
                  ]
                }
              }
            }
          },

          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Resource not found"
                }
              }
            }
          },

          "405": {
            "description": "Method Not Allowed",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "method_not_allowed",
                  "message": "The requested HTTP method is not supported for this endpoint"
                }
              }
            }
          },

          "409": {
            "description": "Conflict â€” record already exists for this month",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Usage data for this month already exists",
                  "details": [
                    {
                      "field": "monthName/year",
                      "issue": "A record for this month is already stored"
                    }
                  ]
                }
              }
            }
          },

          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "validation_error",
                  "message": "One or more fields failed validation",
                  "details": [
                    {
                      "field": "storageUsed",
                      "issue": "Invalid storage value format"
                    }
                  ]
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/environment": {
      "get": {
        "tags": ["Super Admin"],
        "summary": "Fetch environment configuration metadata",
        "description": "Fetches system-level environment configuration metadata available only to Super Admins. This is read-only; no mutation is allowed.",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Environment configuration retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "env": [
                    {
                      "id": 1,
                      "meta_key": "API_KEY",
                      "meta_value": "abcd1234",
                      "created": "2025-11-24T07:51:16.907Z"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "examples": {
                  "missingToken": {
                    "summary": "Bearer token missing",
                    "value": {
                      "success": false,
                      "error": "unauthorized",
                      "message": "Missing or invalid authentication token",
                      "details": [
                        {
                          "field": "Authorization",
                          "issue": "Bearer token must be provided"
                        }
                      ]
                    }
                  },
                  "invalidHeader": {
                    "summary": "Bearer token missing in header",
                    "value": {
                      "success": false,
                      "error": "unauthorized",
                      "message": "Missing or invalid authentication token",
                      "details": [
                        {
                          "field": "Authorization",
                          "issue": "Bearer token must be provided in header"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” only Super Admins can access",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied. Only Super Admins can view environment settings"
                }
              }
            }
          },

          "404": {
            "description": "No environment settings found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "No environment settings found"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Super Admin"],
        "summary": "Update one or more environment configuration fields",
        "description": "Updates one or more environment configuration fields used by the system. Only Super Admins may modify environment settings. Supports partial updates, including nested values, and automatically invalidates cache if enabled.",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "description": "Key-value pairs of environment settings to update. Keys must already exist in metadata or backend must validate additions."
              },
              "example": {
                "EMBED_MODEL": "text-embedding-3-large",
                "DEFAULT_FALLBACK_RESPONSE": "Weâ€™re unable to reach the endpoint.",
                "MAX_PROMPT": "150_PROMPT",
                "UPLOAD_LIMIT_MB": 100,
                "CLOUD_INTEGRATION": 1,
                "ACTIVE_PAYMENT_CURRENCIES": ["INR", "USD"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Environment settings updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Environment settings updated successfully",
                  "updatedKeys": [
                    "EMBED_MODEL",
                    "MAX_PROMPT",
                    "UPLOAD_LIMIT_MB"
                  ]
                }
              }
            }
          },

          "400": {
            "description": "Bad request â€” invalid or missing fields",
            "content": {
              "application/json": {
                "examples": {
                  "invalidType": {
                    "summary": "Invalid value type",
                    "value": {
                      "success": false,
                      "error": "bad_request",
                      "message": "Invalid or missing fields",
                      "details": [
                        {
                          "field": "EMBED_MODEL",
                          "issue": "Value must be a string"
                        }
                      ]
                    }
                  },
                  "noFieldsProvided": {
                    "summary": "No fields provided",
                    "value": {
                      "success": false,
                      "error": "bad_request",
                      "message": "At least one field must be provided for update"
                    }
                  }
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” only Super Admins can update",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Only Super Admins can update environment settings"
                }
              }
            }
          },

          "404": {
            "description": "Environment key not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "One or more environment keys do not exist"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/email/templates": {
      "get": {
        "tags": ["Super Admin"],
        "summary": "Fetch all email templates",
        "description": "Fetches all email templates stored in the system. Only accessible by Super Admins. Used for viewing, listing, and selecting templates for editing.",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Email templates fetched successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "templates": [
                    {
                      "id": 1,
                      "name": "Welcome Email",
                      "subject": "Welcome to Our Service!",
                      "template": "<h1>Hello {{username}}</h1><p>Welcome to our service!</p>",
                      "created": "2024-08-31T12:34:56Z"
                    }
                  ]
                }
              }
            }
          },

          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },

          "403": {
            "description": "Forbidden â€” only Super Admins can fetch templates",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Access denied. Only Super Admins can fetch email templates"
                }
              }
            }
          },

          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },

          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },

          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },

          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/email/templates/{templateId}": {
      "patch": {
        "tags": ["Super Admin"],
        "summary": "Update an existing email template",
        "description": "Updates an existing email template, allowing partial updates. Super Admins can update the template name, subject, HTML body, or filename. This is a non-destructive partial update (PATCH).",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "templateId",
            "in": "path",
            "description": "ID of the template to update",
            "required": true,
            "schema": { "type": "number" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "New template name"
                  },
                  "subject": {
                    "type": "string",
                    "description": "New email subject"
                  },
                  "template": {
                    "type": "string",
                    "description": "HTML content of the template"
                  },
                  "filename": {
                    "type": "string",
                    "description": "Storage filename for the template"
                  }
                },
                "minProperties": 1
              },
              "example": {
                "subject": "Updated Subject",
                "template": "<h1>Updated Content</h1><p>This is the updated template.</p>",
                "filename": "welcome_template_v2"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email template updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Email template updated successfully",
                  "templateId": 1
                }
              }
            }
          },
          "400": {
            "description": "Bad request â€” invalid or missing fields",
            "content": {
              "application/json": {
                "examples": {
                  "invalidHTML": {
                    "summary": "Template must be valid HTML",
                    "value": {
                      "success": false,
                      "error": "bad_request",
                      "message": "Invalid or missing fields",
                      "details": [
                        { "field": "template", "issue": "Must be valid HTML" }
                      ]
                    }
                  },
                  "noFields": {
                    "summary": "No fields provided for update",
                    "value": {
                      "success": false,
                      "error": "bad_request",
                      "message": "At least one field must be provided for update"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden â€” only Super Admins can update email templates",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "Only Super Admins can update email templates"
                }
              }
            }
          },
          "404": {
            "description": "Email template not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Email template not found"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/users/{userId}": {
      "delete": {
        "tags": ["Super Admin"],
        "summary": "Delete a user and all associated resources",
        "description": "Deletes a user and all user-level resources including documents, integrations, settings, permissions, usage data, and personal workspace. Supports deleting solo accounts, team members, and team owners (only if the company has another admin). Does NOT delete the company.",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "ID of the user to delete",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "User and related data deleted successfully."
                }
              }
            }
          },
          "400": {
            "description": "Bad request â€” invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "userId",
                      "issue": "User ID must be a valid string"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden â€” user cannot delete",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to delete users"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "User not found"
                }
              }
            }
          },
          "409": {
            "description": "Conflict â€” cannot delete only admin",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "conflict",
                  "message": "Cannot delete the only administrator in this company"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    },
    "/super-admin/companies/{companyId}": {
      "delete": {
        "tags": ["Super Admin"],
        "summary": "Delete a company and all associated resources",
        "description": "Deletes an entire team/company account, including company owner, all team members, documents, collections, folders, integrations, usage data, settings, roles, permissions, and workspaces. This is a hard cascading delete. Does NOT delete solo accounts.",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "companyId",
            "in": "path",
            "description": "ID of the company to delete",
            "required": true,
            "schema": { "type": "number" }
          }
        ],
        "responses": {
          "200": {
            "description": "Company deleted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Company account and all associated users and data deleted successfully."
                }
              }
            }
          },
          "400": {
            "description": "Bad request â€” invalid or missing fields",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "bad_request",
                  "message": "Invalid or missing fields",
                  "details": [
                    {
                      "field": "companyId",
                      "issue": "Company ID must be a valid number"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized â€” missing or invalid token",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "unauthorized",
                  "message": "Missing or invalid authentication token",
                  "details": [
                    {
                      "field": "Authorization",
                      "issue": "Bearer token must be provided in header"
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden â€” user cannot delete company",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "forbidden",
                  "message": "You are not allowed to delete company accounts"
                }
              }
            }
          },
          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "not_found",
                  "message": "Company not found"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "rate_limit",
                  "message": "Too many requests, please try again later"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "server_error",
                  "message": "An unexpected error occurred"
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "service_unavailable",
                  "message": "Service unavailable, please try again later"
                }
              }
            }
          },
          "504": {
            "description": "Gateway timeout",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": "gateway_timeout",
                  "message": "Server did not respond in time"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "name": "authorization",
        "description": "For authorization, you shall provide a token in the format: Bearer <api_key>",
        "scheme": "bearer"
      },
      "tokenAuth": {
        "type": "apiKey",
        "name": "authorization",
        "in": "header",
        "description": "For authorization of wordpress or slack, you shall provide an API token in the format: <api_token>"
      }
    }
  }
}
